<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zhang185a.gitee.io","root":"/blog/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Zhang185&#39;s blog">
<meta property="og:url" content="http://zhang185a.gitee.io/blog/page/2/index.html">
<meta property="og:site_name" content="Zhang185&#39;s blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="zhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://zhang185a.gitee.io/blog/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Zhang185's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Zhang185's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A17/" class="post-title-link" itemprop="url">2021æ­ç”µå¤šæ ¡7</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-13 23:20:37" itemprop="dateCreated datePublished" datetime="2021-08-13T23:20:37+08:00">2021-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-18 23:52:43" itemprop="dateModified" datetime="2021-08-18T23:52:43+08:00">2021-08-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Fall-with-Trees"><a href="#Fall-with-Trees" class="headerlink" title="Fall with Trees"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7046" target="_blank" rel="noopener">Fall with Trees</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™ä¸€é¢—æ·±åº¦ä¸ºkçš„å®Œå…¨äºŒå‰æ ‘ï¼Œæ»¡è¶³ä¸€ä¸‹å‡ ä¸ªæ¡ä»¶ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„xåæ ‡æ˜¯å…¶æ‰€æœ‰å­èŠ‚ç‚¹çš„å¹³å‡å€¼ï¼›æ¯å±‚çš„yåæ ‡ç›¸åŒï¼›ç›¸é‚»çš„ä¸¤å±‚çš„yåæ ‡å·®å€¼ç›¸åŒã€‚æ±‚è¿™ä¸ªäºŒå‰æ ‘çš„é¢ç§¯ã€‚</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å¿«é€Ÿå¹‚+ç›´æ¥è®¡ç®—æˆ–è€…ç”¨å¼€vector+push_backçš„è¯ä¼šTï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æµ‹è¯„æœºèµ›åæ…¢çš„åŸå› </p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtldink9byj60qa0s4ad602.jpg" alt="image-20210818234649770"></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e4</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">double</span> two[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> cur = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        two[i] = cur;</span><br><span class="line">        cur /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k, xroot, yroot, xl, yl, xr, yr;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; k &gt;&gt; xroot &gt;&gt; yroot &gt;&gt; xl &gt;&gt; yl &gt;&gt; xr &gt;&gt; yr;</span><br><span class="line">    k--;</span><br><span class="line">    <span class="keyword">double</span> ans = (<span class="number">2</span> * k - <span class="number">3</span> + <span class="number">3</span> * two[k]) * (xr - xl) * (yroot - yr);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.3lf\n"</span>, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Link-with-Balls"><a href="#Link-with-Balls" class="headerlink" title="Link with Balls"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7047" target="_blank" rel="noopener">Link with Balls</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™2nä¸ªç›’å­ï¼Œå…¶ä¸­å¥‡æ•°ä½ç½®$pos=2x-1$â€‹ä¸Šçš„ç›’å­å¯ä»¥æ‹¿å‡º$kx$â€‹ä¸ªçƒï¼Œå¶æ•°ä½ç½®$pos=2x$â€‹ä¸Šçš„ç›’å­å¯ä»¥æ‹¿$0\sim x$ä¸ªçƒï¼Œæ±‚è¦æ‹¿mä¸ªçƒçš„æƒ…å†µæ•°é‡</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtl1egbam0j60u40u0tcj02.jpg" alt="image-20210818164727383"></p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int ll</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">ll fac[<span class="number">2</span> * N], rev[<span class="number">2</span> * N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(ll x, ll y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (y) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &amp; <span class="number">1</span>) (ret *= x) %= mod;</span><br><span class="line">        (x *= x) %= mod;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fac[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">2</span> * N; i++) &#123;</span><br><span class="line">        fac[i] = fac[i - <span class="number">1</span>] * i % mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    rev[<span class="number">0</span>] = rev[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; N; i++) &#123;</span><br><span class="line">        rev[i] = qpow(fac[i], mod - <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">C</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; y) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> (fac[x] * rev[x - y]) % mod * rev[y] % mod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ((C(m + n, n) - C(m - <span class="number">1</span>, n)) % mod + mod) % mod &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Link-with-EQ"><a href="#Link-with-EQ" class="headerlink" title="Link with EQ"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7048" target="_blank" rel="noopener">Link with EQ</a></h1><h3 id="é¢˜ç›®-2"><a href="#é¢˜ç›®-2" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æœ‰ä¸€åˆ—é•¿ä¸ºnçš„æ¤…å­ï¼Œç¬¬ä¸€ä¸ªäººéšä¾¿åé‚£ï¼Œä¹‹åçš„æ¯ä¸ªäººéƒ½ä¼šé€‰è¿™æ ·ä¸€ä¸ªä½ç½®ä½¿å¾— ä»–åˆ°æœ€è¿‘çš„äººçš„è·ç¦»æœ€å¤§</p>
<h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å®šä¹‰$dp[len]$è¡¨ç¤ºåœ¨ä¸€ä¸ªé•¿åº¦ä¸ºlençš„åŒºé—´ï¼ˆè¿™ä¸ªåŒºé—´æœ€å·¦è¾¹çš„å·¦è¾¹ä¸€æ ¼åäº†äººï¼Œæœ€å³è¾¹çš„å³è¾¹ä¸€ä¸ªä¹Ÿåäº†äººï¼‰å†…é€‰æ‹©åº§ä½çš„æƒ…å†µã€‚</p>
<p>è½¬ç§»ï¼š$dp[len] = \begin{cases} 0 &amp; len\le2 \ 1+dp[\lfloor len/2 \rfloor]+dp[len-\lfloor len/2 \rfloor-1] &amp; len&gt;2 \end{cases}$</p>
<p>é‚£ä¹ˆç¬¬ä¸€ä¸ªäººé€‰æ‹©ååœ¨iä½ç½®åï¼Œæ€»äººæ•°$ans[i]=\begin{cases}2+dp[n-i-1] &amp; i\lt3 \ 3+dp[i-2]+dp[n-i-1] &amp; 3\le i\le n-2 \2+dp[i-2] &amp; i\gt n-2 \end{cases}$â€‹</p>
<p>æœ€ç»ˆçš„ç­”æ¡ˆå°±æ˜¯$\sum_{i=1}^n dp[i]$ï¼Œè¿™æ ·çš„å¤æ‚åº¦æ˜¯$O(n^2)$ã€‚</p>
<p>è§‚å¯Ÿä¹‹åå‘ç°å…¶å®$\sum_{i=1}^n dp[i]$è¿˜èƒ½è¿›ä¸€æ­¥åŒ–ç®€ä¸º$\begin{cases} 2\times{3(\frac n2-2)+4+\sum_{i=1}^{n-2}dp[i]}&amp;n&amp;1=0 \ 2\times{3(\frac n2-2)+4+\sum_{i=1}^{n-2}dp[i]}+3&amp;n&amp;1=1 \end{cases} $</p>
<p>å› æ­¤åªè¦å¤„ç†ä¸€ä¸‹dpçš„å‰ç¼€å’Œå³å¯ï¼Œå¤æ‚åº¦$O(n)$</p>
<h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">3</span>; len &lt; N; len++) &#123;</span><br><span class="line">        (a[len] = <span class="number">1</span> + a[len / <span class="number">2</span>] + a[len - len / <span class="number">2</span> - <span class="number">1</span>]) %= P;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; N; i++) &#123;</span><br><span class="line">        (a[i] += a[i - <span class="number">1</span>]) %= P;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> tmp = <span class="number">3</span> * (n / <span class="number">2</span> - <span class="number">2</span>) + <span class="number">4</span> + a[n - <span class="number">2</span>];</span><br><span class="line">    tmp = <span class="number">2</span> * tmp;</span><br><span class="line">    <span class="keyword">if</span> (n &amp; <span class="number">1</span>) tmp += <span class="number">3</span>;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; tmp * qpow(n, P - 2) % P &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Link-with-Grenade"><a href="#Link-with-Grenade" class="headerlink" title="Link with Grenade"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7049" target="_blank" rel="noopener">Link with Grenade</a></h1><h3 id="é¢˜ç›®-3"><a href="#é¢˜ç›®-3" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ä¸€ä¸ªäººåœ¨ç©ºä¸­æ‰”ç‚¸å¼¹ï¼Œå·²çŸ¥ç‚¸å¼¹çš„åˆé€Ÿåº¦ã€çˆ†ç‚¸æ—¶é—´å’Œçˆ†ç‚¸èŒƒå›´ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸¢å‡ºå»çš„è§’åº¦ï¼Œæ±‚è¿™ä¸ªäººå­˜æ´»çš„æ¦‚ç‡</p>
<h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>ï¼ˆçœ‹äº†ç­”æ¡ˆæ‰å‘ç°ï¼Œå¥½åƒæˆ‘æƒ³ç®€å•äº†ï¼Œå¥½åƒæ­£ç¡®çš„åº”è¯¥æ˜¯è¦è€ƒè™‘è¡¨é¢ç§¯ä»€ä¹ˆä»€ä¹ˆçš„ï¼Œä½†æ˜¯æˆ‘è¿™æ­£å¥½ççŒ«ç¢°ç€æ­»è€—å­ç®—å‡ºæ¥äº†ï¼‰</p>
<img src="https://tva1.sinaimg.cn/large/008i3skNly1gtge8qq23qj60vt0u0q6402.jpg" alt="image-20210814162402603" style="zoom:50%;" />

<h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int ll</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> P = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(ll x, ll y)</span> </span>&#123;</span><br><span class="line">    ll ret = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (y) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &amp; <span class="number">1</span>) (ret *= x) %= P;</span><br><span class="line">        (x *= x) %= P;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>) ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> g = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> t, v, r;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t &gt;&gt; v &gt;&gt; r;</span><br><span class="line">    <span class="keyword">int</span> A = <span class="number">4</span> * g * t * t * t * v;</span><br><span class="line">    <span class="keyword">int</span> B = <span class="number">4</span> * (r * r - v * v * t * t) - g * g * t * t * t * t;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">abs</span>(B) &gt;= <span class="built_in">abs</span>(A)) <span class="built_in">cout</span> &lt;&lt; <span class="keyword">int</span>((B / <span class="built_in">abs</span>(B)) * (A / <span class="built_in">abs</span>(A)) == <span class="number">-1</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; ((A - B + P)) % P * qpow(<span class="number">2</span> * A, P - <span class="number">2</span>) % P &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Link-with-Limit"><a href="#Link-with-Limit" class="headerlink" title="Link with Limit"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7050" target="_blank" rel="noopener">Link with Limit</a></h1><h3 id="é¢˜ç›®-4"><a href="#é¢˜ç›®-4" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>å¾ˆéš¾æè¿°ï¼Œçœ‹å›¾ï¼š<img src="https://tva1.sinaimg.cn/large/008i3skNly1gtgeb1lphqj61380d40ua02.jpg" alt="image-20210814162619046" style="zoom:33%;" /></p>
<h3 id="æ€è·¯-4"><a href="#æ€è·¯-4" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å¯ä»¥è½¬åŒ–ä¸ºä¸€ä¸ªå›¾ï¼Œå¦‚æœè¿™ä¸ªå›¾ä¸­æœ‰ç¯ï¼Œé‚£ä¹ˆå„ä¸ªç¯ä¸Šçš„ç‚¹çš„å¹³å‡å€¼ã€é“¾çš„ç»ˆç‚¹åº”è¯¥ç›¸åŒï¼ˆå› ä¸ºæ˜¯å–æé™ï¼‰</p>
<p>é‚£ä¹ˆå¯ä»¥ç”¨DFSæ‰¾åˆ°ç¯å’Œå…¶å¹³å‡å€¼</p>
<p>è¿˜æœ‰å…¶ä»–å¾ˆå¤šç§æ–¹æ³•ï¼Œæ¯”å¦‚ç”¨æ‹“æ‰‘æ’åºçš„æ–¹æ³•åš</p>
<h3 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n, a[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> cnt, len, col;</span><br><span class="line">&#125;;</span><br><span class="line">node vis[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> y == <span class="number">0</span> ? x : gcd(y, x % y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; avg = &#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">bool</span> fail = <span class="number">0</span>;</span><br><span class="line">node cur;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> color)</span> </span>&#123;</span><br><span class="line">    cur.len += x;</span><br><span class="line">    cur.cnt++;</span><br><span class="line">    <span class="keyword">if</span> (vis[x].col) &#123;</span><br><span class="line">        <span class="keyword">if</span> (vis[x].col == color) &#123;</span><br><span class="line">            <span class="keyword">int</span> A = cur.cnt - vis[x].cnt, B = cur.len - vis[x].len;</span><br><span class="line">            <span class="keyword">int</span> g = gcd(A, B);</span><br><span class="line">            A /= g, B /= g;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (avg.first == <span class="number">-1</span>) &#123;</span><br><span class="line">                avg = &#123;A, B&#125;;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (avg.first != A || avg.second != B) &#123;</span><br><span class="line">                fail = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    vis[x] = cur;</span><br><span class="line">    dfs(a[x], color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">    </span><br><span class="line">    fail = <span class="number">0</span>;</span><br><span class="line">    avg = &#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) vis[i].col = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cur = &#123;<span class="number">0</span>, <span class="number">0</span>, i&#125;;</span><br><span class="line">        dfs(i, i);</span><br><span class="line">        <span class="keyword">if</span> (fail) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Smzzl-with-Greedy-Snake"><a href="#Smzzl-with-Greedy-Snake" class="headerlink" title="Smzzl with Greedy Snake"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7051" target="_blank" rel="noopener">Smzzl with Greedy Snake</a></h1><h3 id="é¢˜ç›®-5"><a href="#é¢˜ç›®-5" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æ¨¡æ‹Ÿè´ªåƒè›‡æ¸¸æˆ</p>
<p>ç»™ä½ å…¶å®ä½ç½®å’Œå„ä¸ªé£Ÿç‰©çš„ä½ç½®ï¼Œæ¯æ¬¡åƒæ‰ä¸€ä¸ªæ‰ä¼šå‡ºç°ä¸‹ä¸€ä¸ªï¼Œæ±‚æœ€çŸ­è·ç¦»</p>
<h3 id="æ€è·¯-5"><a href="#æ€è·¯-5" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>æ¨¡æ‹Ÿ</strong></p>
<p>ä¸€ä¸ªç»éªŒï¼šä»¥åå†™å¤§æ¨¡æ‹Ÿå…ˆæƒ³æ¸…æ¥šï¼Œè¿™æ ·å°±èƒ½å°‘å†™å¾ˆå¤šif-else å¦™ğŸ¸å¦™ğŸ¸</p>
<h3 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> U cout&lt;&lt;<span class="meta-string">'u'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F cout&lt;&lt;<span class="meta-string">'f'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> C cout&lt;&lt;<span class="meta-string">'c'</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//       x  y</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; DIR[<span class="number">2</span>][<span class="number">2</span>] = &#123;&#123;&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;&#125;,</span><br><span class="line">                          &#123;&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> go[<span class="number">4</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">0</span>,  <span class="number">1</span>&#125;,</span><br><span class="line">                &#123;<span class="number">1</span>,  <span class="number">0</span>&#125;,</span><br><span class="line">                &#123;<span class="number">0</span>,  <span class="number">-1</span>&#125;,</span><br><span class="line">                &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x, y, d, m;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y &gt;&gt; d &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="keyword">int</span> tx, ty;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; tx &gt;&gt; ty;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; cur = DIR[tx &gt; x][ty &gt; y];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> zzy = <span class="number">1</span>; zzy &gt;= <span class="number">0</span>; zzy--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (zzy == <span class="number">1</span> &amp;&amp; cur[d]) &#123;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cur[(d + <span class="number">1</span>) % <span class="number">4</span>]) &#123;</span><br><span class="line">                C;</span><br><span class="line">                d = (d + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cur[(d + <span class="number">3</span>) % <span class="number">4</span>]) &#123;</span><br><span class="line">                U;</span><br><span class="line">                d = (d + <span class="number">3</span>) % <span class="number">4</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç°åœ¨æ–¹å‘ä¸€å®šæ˜¯å¯¹çš„äº†</span></span><br><span class="line">            <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> cnt = (tx != x) + (ty != y);</span><br><span class="line">                <span class="keyword">if</span> (cnt == zzy) <span class="keyword">break</span>;</span><br><span class="line">                x += go[d][<span class="number">0</span>], y += go[d][<span class="number">1</span>];</span><br><span class="line">                F;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Yiwen-with-Sqc"><a href="#Yiwen-with-Sqc" class="headerlink" title="Yiwen with Sqc"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7055" target="_blank" rel="noopener">Yiwen with Sqc</a></h1><h3 id="é¢˜ç›®-6"><a href="#é¢˜ç›®-6" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹äºæ¯ä¸€ä¸ªåŒºé—´ä¸­çš„æ¯ä¸€ç§å­—æ¯ï¼Œæ±‚å…¶å‡ºç°çš„æ•°é‡çš„å¹³æ–¹å’Œ</p>
<h3 id="æ€è·¯-6"><a href="#æ€è·¯-6" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>å‰ç¼€å’Œ</strong></p>
<p>å¤„ç†æœ‰ç‚¹ç±»ä¼¼äº<a href="https://acm.hdu.edu.cn/showproblem.php?pid=7020" target="_blank" rel="noopener">æ­ç”µ5çš„Array</a>ï¼Œåªä¸è¿‡è¿™é¢˜ä¸ç”¨çº¿æ®µæ ‘/æ ‘çŠ¶æ•°ç»„ç»´æŠ¤ç½¢äº†</p>
<p>æšä¸¾26ä¸ªå­—æ¯ï¼Œè®°$a_i$ä¸ºè¯¥å­—ç¬¦åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼Œæ¯é¡¹çš„é•¿åº¦$len_i=a_{i+1}-a_i$â€‹ã€‚</p>
<p>æšä¸¾æ¯ä¸€ä¸ªç»ˆç‚¹iï¼Œ<br>$$<br>\begin{aligned}<br>ans_k&amp;= \sum_{i=0}^{n} \sum_{j=0}^{i-1} len_i\times len_j\times(i-j)^2 \<br>   &amp;= \sum_{i=0}^{n} \sum_{j=0}^{i-1} len_i\times len_j\times(i^2-2ij+j^2) \<br>   &amp;= \sum_{i=0}^{n} \sum_{j=0}^{i-1} len_i\times[i^2(len_j)-2i(jlen_j)+(j^2len_j)] \<br>   &amp;= \sum_{i=0}^{n} len_i\times[i^2(\sum_{j=0}^{i-1}len_j)-2i(\sum_{j=0}^{i-1}jlen_j)+(\sum_{j=0}^{i-1}j^2len_j)]<br>\end{aligned}<br>$$<br>å› æ­¤æˆ‘ä»¬åªè¦ç»´æŠ¤ä¸‰ä¸ªæ ‡è®°$\begin{cases}l_1=\sum len_j \ l_2=\sum j\times len_j \ l_3=\sum j^2\times len_j \end{cases}$â€‹</p>
<p>æœ€ç»ˆçš„ç­”æ¡ˆå°±æ˜¯$ans=\sum i^2l_1-2il_2+l_3$â€‹</p>
<p>5555555æ¯”èµ›çš„æ—¶å€™å†™å‡ºæ¥äº†ï¼Œè‚‹æœ¨äº†</p>
<h3 id="ä»£ç -6"><a href="#ä»£ç -6" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">26</span>;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> P = <span class="number">998244353</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    <span class="keyword">int</span> len = s.length();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        a[i].clear();</span><br><span class="line">        a[i].push_back(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123; </span><br><span class="line">        a[s[i] - <span class="string">'a'</span>].push_back(i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;cur: a) &#123;</span><br><span class="line">        <span class="keyword">int</span> sz = cur.size();</span><br><span class="line">        cur.push_back(len + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sz; j++) &#123;</span><br><span class="line">            cur[j] = cur[j + <span class="number">1</span>] - cur[j];</span><br><span class="line">        &#125;</span><br><span class="line">        cur.pop_back();</span><br><span class="line">        ll l1 = <span class="number">0</span>, l2 = <span class="number">0</span>, l3 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (ll i = <span class="number">0</span>; i &lt; sz; i++) &#123;</span><br><span class="line">            (ans += (((((l1 * i) % P * i) % P - (<span class="number">2</span> * i * l2) % P) % P + l3) % P) * cur[i] % P) %= P;</span><br><span class="line">            (l1 += cur[i]) %= P;</span><br><span class="line">            (l2 += (i * cur[i]) % P) %= P;</span><br><span class="line">            (l3 += (i * i) % P * cur[i] % P) %= P;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (ans + P) % P &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A18/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A18/" class="post-title-link" itemprop="url">2021ç‰›å®¢å¤šæ ¡8</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-10 19:02:30" itemprop="dateCreated datePublished" datetime="2021-08-10T19:02:30+08:00">2021-08-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-13 16:05:28" itemprop="dateModified" datetime="2021-08-13T16:05:28+08:00">2021-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="OR"><a href="#OR" class="headerlink" title="OR"></a><a href="https://ac.nowcoder.com/acm/contest/11259/D" target="_blank" rel="noopener">OR</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å‡ºä¸¤ä¸ªæ•°ç»„bã€cï¼Œæ±‚æœ‰å¤šå°‘ä¸ªaæ•°ç»„ä½¿å¾—ï¼š$b[i] = a[i-1]\ or\ a[i]$â€‹ã€$c[i]=a[i-1]+a[i]$â€‹â€‹ã€‚</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å…³é”®ä¸€æ­¥ï¼š$d[i] = c[i]-b[i]=a[i-1]\ and\ a[i]$</p>
<p>æ‰€ä»¥è¿™é¢˜å®é™…ä¸Šæ˜¯ç»™å‡ºäº†aæ•°ç»„ä¸­ç›¸é‚»ä¸¤ä¸ªæ•°çš„æŒ‰ä½ä¸å’ŒæŒ‰ä½æˆ–çš„æƒ…å†µã€‚</p>
<p>å¯¹æ¯ä¸€ä½è€ƒè™‘ï¼Œåªè¦çŸ¥é“äº†a[1]åœ¨è¿™ä½çš„å–å€¼ï¼Œåé¢çš„å€¼å°±ä¹ŸçŸ¥é“äº†ã€‚</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n, b[N], c[N], d[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) <span class="built_in">cin</span> &gt;&gt; b[i]; <span class="comment">//or</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) <span class="built_in">cin</span> &gt;&gt; c[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) d[i] = c[i] - b[i]; <span class="comment">//and</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">30</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> ok = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> zzy = <span class="number">0</span>; zzy &lt; <span class="number">2</span>; zzy++) &#123;</span><br><span class="line">            <span class="comment">// ç¬¬ä¸€ä½å¡«ä»€ä¹ˆ</span></span><br><span class="line">            <span class="keyword">bool</span> pre = zzy;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">                <span class="keyword">int</span> OR = (b[j] &gt;&gt; i) &amp; <span class="number">1</span>, AND = (d[j] &gt;&gt; i) &amp; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (OR == <span class="number">0</span> &amp;&amp; AND == <span class="number">0</span> &amp;&amp; pre == <span class="number">0</span> || OR == <span class="number">1</span> &amp;&amp; AND == <span class="number">1</span> &amp;&amp; pre == <span class="number">1</span>) &#123;&#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (OR == <span class="number">1</span> &amp;&amp; AND == <span class="number">0</span>) &#123;</span><br><span class="line">                    pre ^= <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (j == n) ok++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!ok) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ans *= ok;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Robots"><a href="#Robots" class="headerlink" title="Robots"></a><a href="https://ac.nowcoder.com/acm/contest/11259/F" target="_blank" rel="noopener">Robots</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æœ‰ä¸€ä¸ªn*mçš„çŸ©å½¢ï¼Œæ¯ä¸ªæ ¼å­æœ‰0/1ä¸¤ç§çŠ¶æ€ï¼Œ0ä»£è¡¨è·¯ï¼Œ1ä»£è¡¨éšœç¢ç‰©ï¼Œæœ‰ä¸‰ç§æœºå™¨äººï¼šä¸€ç§åªèƒ½å‘å³ï¼Œä¸€ç§åªèƒ½å‘ä¸‹ï¼Œä¸€ç§åˆèƒ½å‘å³åˆèƒ½å‘ä¸‹ã€‚å¯¹äºæ¯æ¬¡è¯¢é—®ï¼Œç»™å‡ºèµ·ç‚¹ã€ç»ˆç‚¹å’Œæœºå™¨äººçš„ç§ç±»ï¼Œæ±‚è¯¥æœºå™¨äººèƒ½ä¸èƒ½ä»èµ·ç‚¹èµ°åˆ°ç»ˆç‚¹</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><h4 id="åšæ³•1-åŠ¨æ€è§„åˆ’-dp-ç¦»çº¿"><a href="#åšæ³•1-åŠ¨æ€è§„åˆ’-dp-ç¦»çº¿" class="headerlink" title="åšæ³•1:åŠ¨æ€è§„åˆ’ dp ç¦»çº¿"></a>åšæ³•1:<strong>åŠ¨æ€è§„åˆ’ dp ç¦»çº¿</strong></h4><p>çŠ¶æ€å®šä¹‰ï¼š$dp[i][j][k][l]$â€‹â€‹ä»£è¡¨$(k, l)$â€‹èƒ½ä¸èƒ½èµ°åˆ°$(i, j)$</p>
<p>çŠ¶æ€è½¬ç§»ï¼š$dp[i][j][k][l] = \begin{cases} dp[i-1][j][k][l]\ or \ dp[i][j-1][k][l] &amp; a[i][j]=1 \ 0 &amp; a[i][j]=0 \end{cases} $â€‹â€‹ å¹¶ä¸”$a[i][j]=1$æ—¶ï¼Œ$dp[i][j][i][j]=1$</p>
<p>ä¹ä¸€çœ‹ï¼šæ—¶é—´å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯$O(n^4)$â€‹ï¼Œä½†æ˜¯ï¼</p>
<ul>
<li>çœ‹ç¬¬3ã€4ç»´ï¼šè¿™é‡Œçš„$kã€l$å¦‚æœç”¨bitsetè¡¨ç¤ºçš„è¯ï¼Œé‚£ä¹ˆ $dp[i][j]=dp[i-1][j]\ or \ dp[i][j-1]$â€‹</li>
<li>çœ‹ç¬¬1ç»´ï¼šè¿™é‡Œçš„$i$â€‹â€‹åªèƒ½ç”±$i-1$â€‹æˆ–$i$â€‹â€‹è½¬ç§»è€Œæ¥ï¼Œå› æ­¤å¯ä»¥ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–</li>
</ul>
<p>å°†æŸ¥è¯¢ç¦»çº¿ä¸‹æ¥å°±è¡Œ</p>
<p>å¦‚æœç”¨bitsetï¼Œå¤æ‚åº¦ç›¸å½“äºæ˜¯$O(\frac{1}{64}n^4)$ã€‚ç”¨bitsetæˆ‘æµ‹è¦1000msï¼Œç”¨boolæ•°ç»„çš„è¯ä¼šTï¼Œä¸‹é¢çš„åˆ†æ²»æ³•åªè¦250msï¼Œä½†æ˜¯è¿™é¢˜æ—¶é—´ç»™äº†5000msï¼Œåº”è¯¥æ˜¯æ•°æ®ä¸å¤Ÿå¼ºå§ã€‚ã€‚</p>
<h4 id="åšæ³•2-åˆ†æ²»æ³•"><a href="#åšæ³•2-åˆ†æ²»æ³•" class="headerlink" title="åšæ³•2:åˆ†æ²»æ³•"></a>åšæ³•2:<strong>åˆ†æ²»æ³•</strong></h4><p>å…¶å®æ˜¯åœ¨åšæ³•1çš„åŸºç¡€ä¸Šä¼˜åŒ–çš„ï¼ŒåŒæ ·éœ€è¦å°†æ¯æ¬¡æŸ¥è¯¢ç¦»çº¿ã€‚</p>
<p>å®šä¹‰ä¸€ä¸ªå‡½æ•°$f(l, r)$ï¼Œå¦‚æœèµ·ç‚¹å’Œç»ˆç‚¹æ»¡è¶³$x\in[l, r]$ï¼Œå°±ä¼šè¿”å›èƒ½å¦åˆ°è¾¾ï¼Œå…¶è§£å†³çš„æ–¹æ³•ä¸ºï¼š</p>
<ol>
<li>æ¯æ¬¡å°†å½“å‰çš„åŒºé—´åˆ†æˆä¸Šä¸‹ä¸¤åŠ$(l, mid)ã€(mid+1, r)$</li>
<li>å¦‚æœèµ·ç‚¹ç»ˆç‚¹çš„xåæ ‡éƒ½åœ¨ä¸ŠåŠåŒºé—´æˆ–è€…éƒ½åœ¨ä¸‹åŠåŒºé—´ï¼Œé‚£ä¹ˆå°±è°ƒç”¨$f(l, mid)$æˆ–è€…$f(mid+1, r)$â€‹</li>
<li>å¦åˆ™ç”¨dpå¤„ç†ä¸ŠåŠéƒ¨åˆ†åˆ°midå’Œmidåˆ°ä¸‹åŠéƒ¨åˆ†çš„æƒ…å†µ($dp[i][j][k]$â€‹â€‹â€‹è¡¨ç¤º(i, j)èƒ½ä¸èƒ½åˆ°$(mid, k)$â€‹ï¼Œå…·ä½“è½¬ç§»è¿‡ç¨‹å¯ä»¥çœ‹æ³•1)</li>
<li>å¦‚æœå­˜åœ¨kä½¿å¾—$dp[x_{start}][y_{start}][k]\ &amp;\  dp[x_{end}][y_{end}][k]=1$â€‹ï¼Œåˆ™å¯è¾¾ã€‚</li>
</ol>
<p>å…¶å¤æ‚åº¦ä¸º$O(q\log n+n^3\log\frac n{32})$â€‹â€‹â€‹ï¼Œä½†æ˜¯å¯èƒ½å¸¸æ•°å¾ˆå¤§å§ã€‚ä»£ç ç•¥</p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">550</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y, idx;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="built_in">string</span> a[N];</span><br><span class="line"><span class="comment">//bool dp[N][N][N];</span></span><br><span class="line"><span class="built_in">bitset</span>&lt;N * N&gt; dp[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; q[N][N];</span><br><span class="line"><span class="keyword">bool</span> ans[<span class="number">500010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        a[i] = <span class="string">'0'</span> + a[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> qn;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; qn;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; qn; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> t, sx, sy, tx, ty;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; t &gt;&gt; sx &gt;&gt; sy &gt;&gt; tx &gt;&gt; ty;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sy != ty || sx &gt; tx) ans[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                ans[i] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = sx; j &lt;= tx; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (a[j][ty] == <span class="string">'1'</span>) &#123;</span><br><span class="line">                        ans[i] = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sx != tx || sy &gt; ty) ans[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                ans[i] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = sy; j &lt;= ty; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (a[tx][j] == <span class="string">'1'</span>) &#123;</span><br><span class="line">                        ans[i] = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            q[tx][ty].push_back(&#123;sx, sy, i&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i][j] == <span class="string">'1'</span>) &#123;</span><br><span class="line">                dp[j].reset();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[j][i * N + j] = <span class="number">1</span>;</span><br><span class="line">                dp[j] |= dp[j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> x: q[i][j]) &#123;</span><br><span class="line">                ans[x.idx] = dp[j][x.x * N + x.y];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; qn; i++) <span class="built_in">cout</span> &lt;&lt; (ans[i] ? <span class="string">"yes"</span> : <span class="string">"no"</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A17/" class="post-title-link" itemprop="url">2021ç‰›å®¢å¤šæ ¡7</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-10 19:02:10" itemprop="dateCreated datePublished" datetime="2021-08-10T19:02:10+08:00">2021-08-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-13 22:54:49" itemprop="dateModified" datetime="2021-08-13T22:54:49+08:00">2021-08-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="xay-loves-trees"><a href="#xay-loves-trees" class="headerlink" title="xay loves trees"></a><a href="https://ac.nowcoder.com/acm/contest/11258/F" target="_blank" rel="noopener">xay loves trees</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™ä¸¤æ£µéƒ½ä»¥1ä¸ºæ ¹ç»“ç‚¹ã€é•¿åº¦ç›¸åŒçš„æ ‘ï¼Œæ±‚ä¸€ä¸ªåºåˆ—ä½¿å¾—ï¼šè¿™ä¸ªåºåˆ—çš„æ‰€æœ‰å€¼åœ¨æ ‘1ä¸­ä¸¤ä¸¤ä¸ºç¥–å…ˆå„¿å­å…³ç³»ï¼Œåœ¨æ ‘2ä¸­ä¸¤ä¸¤ä¸æ˜¯ç¥–å…ˆå„¿å­å…³ç³»ã€‚</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>DFSåº æ ‘çŠ¶æ•°ç»„/çº¿æ®µæ ‘</strong></p>
<p>DFSåºï¼šæ¯ä¸ªèŠ‚ç‚¹åœ¨dfsæ·±åº¦ä¼˜å…ˆéå†ä¸­çš„è¿›å‡ºæ ˆçš„æ—¶é—´åºåˆ—ã€‚</p>
<p>å…¶ä¼ªä»£ç ä¸ºï¼š</p>
<figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">time = <span class="number">0</span>;</span><br><span class="line">dfs(int <span class="symbol">x</span>) &#123;</span><br><span class="line">    in[<span class="symbol">x</span>] = ++time;</span><br><span class="line">    <span class="keyword">for</span> (<span class="symbol">x</span>ç»“ç‚¹çš„æ¯ä¸ªå­©å­ç»“ç‚¹<span class="symbol">y</span>) &#123;</span><br><span class="line">        dfs(<span class="symbol">y</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    out[<span class="symbol">x</span>] = ++time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä»ä¸­å¾—åˆ°ä¸€ä¸ªå¾ˆé‡è¦çš„æ€§è´¨ï¼šæ¯ä¸ªèŠ‚ç‚¹xçš„å­©å­ç»“ç‚¹çš„è¿›å‡ºæ—¶é—´éƒ½ä¸€å®šåœ¨$[in[x], out[x]]$â€‹ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹çš„è¿›å‡ºæ—¶é—´éƒ½ä¸ç›¸äº¤ã€‚</p>
<p>å›åˆ°è¿™é“é¢˜ï¼Œé¦–å…ˆå¤„ç†æ ‘1ï¼Œæˆ‘ä»¬å¯ä»¥éå†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰¾åˆ°è¿™ä¸ªèŠ‚ç‚¹çš„æœ€é•¿é“¾ï¼Œå¦‚æœå½“å‰è¿™ä¸ªæœ€é•¿é“¾ä¸æ»¡è¶³æ ‘2çš„é™åˆ¶ï¼Œå°±ä¸æ–­åœ°æœ€é«˜çš„èŠ‚ç‚¹è¸¢æ‰ï¼Œç›´åˆ°æ»¡è¶³ã€‚</p>
<p>è€Œå¯¹äºæ ‘2çš„checkï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªçº¿æ®µæ ‘/æ ‘çŠ¶æ•°ç»„æ¥ç»´æŠ¤ï¼Œæ¯åŠ å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±å¯¹$[in[x], out[x]]$â€‹åŒºé—´åŠ 1ï¼Œè¿™æ ·å¦‚æœå‡ºç°äº†æŸä¸ªåŒºé—´çš„å€¼å¤§äº1ï¼Œåˆ™è¯´æ˜å½“å‰é€‰æ‹©çš„åºåˆ—ä¸­å­˜åœ¨ç¥–å…ˆå…³ç³»ï¼Œåˆ™ä¸æ»¡è¶³æ¡ä»¶ã€‚</p>
<p>å…³é”®ä»£ç å…¶å®å°±æ˜¯dfså‡½æ•°ã€‚</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> left, right;</span><br><span class="line">    ll data, lazy = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">node tree[<span class="number">4</span> * maxn];</span><br><span class="line"></span><br><span class="line"><span class="comment">// tree[0] -&gt; pos = 1, l = 1, r = n;</span></span><br><span class="line"><span class="comment">// å»ºçº¿æ®µæ ‘</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    tree[pos].data = tree[pos].lazy = <span class="number">0</span>;</span><br><span class="line">    tree[pos].left = l;</span><br><span class="line">    tree[pos].right = r;</span><br><span class="line">    <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">    build(<span class="number">2</span> * pos, l, mid);</span><br><span class="line">    build(<span class="number">2</span> * pos + <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†lazyå‘ä¸‹ä¼ </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spear</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    tree[<span class="number">2</span> * i].lazy += tree[i].lazy;</span><br><span class="line">    tree[<span class="number">2</span> * i].data += tree[i].lazy * (tree[<span class="number">2</span> * i].right - tree[<span class="number">2</span> * i].left + <span class="number">1</span>);</span><br><span class="line">    tree[<span class="number">2</span> * i + <span class="number">1</span>].lazy += tree[i].lazy;</span><br><span class="line">    tree[<span class="number">2</span> * i + <span class="number">1</span>].data += tree[i].lazy * (tree[<span class="number">2</span> * i + <span class="number">1</span>].right - tree[<span class="number">2</span> * i + <span class="number">1</span>].left + <span class="number">1</span>);</span><br><span class="line">    tree[i].lazy = <span class="number">0</span>;</span><br><span class="line">    tree[i].data = tree[<span class="number">2</span> * i].data + tree[<span class="number">2</span> * i + <span class="number">1</span>].data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™åŒºé—´[l, r]åŠ ä¸Šx</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> l, <span class="keyword">int</span> r, ll x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt; r || tree[i].right &lt; l) &#123; <span class="comment">// åœ¨æ‰€æŸ¥è¯¢åŒºé—´å¤–</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt;= l &amp;&amp; tree[i].right &lt;= r) &#123; <span class="comment">// åŒ…æ‹¬åœ¨æ‰€æŸ¥è¯¢åŒºé—´å†…</span></span><br><span class="line">        tree[i].lazy += x;</span><br><span class="line">        tree[i].data += x * (tree[i].right - tree[i].left + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    spear(i);</span><br><span class="line">    update(<span class="number">2</span> * i, l, r, x);</span><br><span class="line">    update(<span class="number">2</span> * i + <span class="number">1</span>, l, r, x);</span><br><span class="line">    tree[i].data = tree[<span class="number">2</span> * i].data + tree[<span class="number">2</span> * i + <span class="number">1</span>].data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚åŒºé—´[l, r]çš„å’Œ</span></span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt; r || tree[i].right &lt; l) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt;= l &amp;&amp; tree[i].right &lt;= r) &#123; <span class="comment">// åŒ…æ‹¬åœ¨æ‰€æŸ¥è¯¢åŒºé—´å†…</span></span><br><span class="line">        <span class="keyword">return</span> tree[i].data;</span><br><span class="line">    &#125;</span><br><span class="line">    spear(i);</span><br><span class="line">    <span class="keyword">return</span> query(<span class="number">2</span> * i, l, r) + query(<span class="number">2</span> * i + <span class="number">1</span>, l, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a[maxn], b[maxn];</span><br><span class="line"><span class="keyword">int</span> in[maxn], out[maxn];</span><br><span class="line"><span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfn</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa)</span> </span>&#123; <span class="comment">// dfs-&gt;2</span></span><br><span class="line">    in[x] = ++t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> y: b[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y == fa) <span class="keyword">continue</span>;</span><br><span class="line">        dfn(y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    out[x] = ++t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">deque</span>&lt;<span class="keyword">int</span>&gt; dq;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa)</span> </span>&#123; <span class="comment">// dfs -&gt; 1</span></span><br><span class="line">    <span class="comment">// æšä¸¾è¿™ä¸ªç‚¹èƒ½å¾€ä¸Šèµ°å¤šè¿œ</span></span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; sta;</span><br><span class="line">    <span class="keyword">while</span> (query(<span class="number">1</span>, in[x], out[x])) &#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = dq.front();</span><br><span class="line">        update(<span class="number">1</span>, in[tmp], out[tmp], <span class="number">-1</span>);</span><br><span class="line">        sta.push(tmp), dq.pop_front();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dq.push_back(x);</span><br><span class="line">    update(<span class="number">1</span>, in[x], out[x], <span class="number">1</span>);</span><br><span class="line">    ans = max(ans, (<span class="keyword">int</span>) dq.size());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> y: a[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y == fa) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿˜åŸ</span></span><br><span class="line">    <span class="keyword">while</span> (!sta.empty()) &#123;</span><br><span class="line">        update(<span class="number">1</span>, in[sta.top()], out[sta.top()], <span class="number">1</span>);</span><br><span class="line">        dq.push_front(sta.top()), sta.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    dq.pop_back();</span><br><span class="line">    update(<span class="number">1</span>, in[x], out[x], <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    build(<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span> * n + <span class="number">10</span>);</span><br><span class="line">    ans = t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) a[i].clear(), b[i].clear();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, x, y; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        a[x].push_back(y);</span><br><span class="line">        a[y].push_back(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, x, y; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        b[x].push_back(y);</span><br><span class="line">        b[y].push_back(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dfn(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="xay-loves-count"><a href="#xay-loves-count" class="headerlink" title="xay loves count"></a><a href="https://ac.nowcoder.com/acm/contest/11258/H" target="_blank" rel="noopener">xay loves count</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„($0&lt;a_i&lt;10^6$)ï¼Œæ±‚æœ‰å¤šå°‘å¯¹$a_i \times a_j=a_k$</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>è§‚å¯Ÿåˆ°$a_i$å¾ˆå°ï¼Œä¿å­˜æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°ï¼Œç”¨ç±»ä¼¼ç­›è´¨æ•°çš„æ–¹æ³•å°±å¯ä»¥å¤„ç†å‡ºæ‰€æœ‰çš„ç­”æ¡ˆäº†ã€‚</p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‹è¡Œå‹çš„ç©çš„</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line">ll n, cnt[N], ans = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, x; i &lt; n; i++) <span class="built_in">cin</span> &gt;&gt; x, cnt[x]++;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j * i &lt; N; j++) ans += cnt[j] * cnt[i] * cnt[i * j];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="xay-loves-Floyd"><a href="#xay-loves-Floyd" class="headerlink" title="xay loves Floyd"></a><a href="https://ac.nowcoder.com/acm/contest/11258/J" target="_blank" rel="noopener">xay loves Floyd</a></h1><h3 id="é¢˜ç›®-2"><a href="#é¢˜ç›®-2" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒFloydçš„æ­£ç¡®é¡ºåºæ˜¯k-i-jï¼Œä½†æ˜¯å¦‚æœå†™æˆi-j-kï¼Œä¼šæœ‰å¤šå°‘ä¸ªæœ€çŸ­è·ç¦»æ˜¯æ­£ç¡®çš„å‘¢ï¼Ÿ</p>
<h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å…ˆå¯¹æ¯ä¸€ä¸ªç‚¹è·‘ä¸€édijï¼Œç®—å‡ºæœ€çŸ­è·ç¦»çš„æ­£ç¡®ç­”æ¡ˆï¼Œç„¶åéå†æ¯ä¸€æ¡è¾¹$(u, v)$ï¼Œå¦‚æœè¿™æ¡è¾¹çš„è·ç¦»ç­‰äº$dis[u][v]$ï¼Œé‚£ä¹ˆå°±è¯´æ˜è¿™æ¡è¾¹ä¸€å®šå¯ä»¥ï¼Œæˆ‘ä»¬ç”¨$ok[i][j]$ä»£è¡¨$dis[i][j]$ä¼šæ˜¯æ­£ç¡®çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿi-j-kçš„è¿ç®—ï¼Œå¦‚æœæœ‰<code>ok[i][k] &amp;&amp; ok[k][j] &amp;&amp; dis[i][j] == dis[i][k] + dis[k][j]</code>(æ„æ€æ˜¯ï¼š(i, k)å’Œ(k, j)æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”kç‚¹å¯ä»¥ä½œä¸ºiã€jçš„ä¸­è½¬ç‚¹)é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥$ok[i][j]$èµ‹ä¸º1äº†ã€‚</p>
<p>ä½†æ˜¯è¿™æ ·çš„å¤æ‚åº¦æ˜¯$O(nm\log n + n^3)$ä¼šTï¼Œéœ€è¦ç¨ä½œä¼˜åŒ–ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ¯æ¬¡å¤„ç†åˆ°$ok[i][k]$ä¸º1æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é¢å¤–ç”¨ä¸€ä¸ªvectorå‚¨å­˜kå€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸ç”¨éå†æ‰€æœ‰çš„käº†ã€‚</p>
<h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> INF = <span class="number">5e8</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> w first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> t second</span></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; node;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; e[N];</span><br><span class="line"><span class="keyword">int</span> min_e[N][N];</span><br><span class="line"><span class="keyword">bool</span> ok[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dij</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            min_e[i][j] = INF;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">bitset</span>&lt;N&gt; vis;</span><br><span class="line">        priority_queue&lt;node, <span class="built_in">vector</span>&lt;node&gt;, greater&lt;&gt; &gt; pq;</span><br><span class="line">        pq.push(&#123;<span class="number">0</span>, i&#125;);</span><br><span class="line">        <span class="keyword">while</span> (!pq.empty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> j = pq.top().t, w = pq.top().w;</span><br><span class="line">            pq.pop();</span><br><span class="line">            <span class="keyword">if</span> (vis[j]) <span class="keyword">continue</span>;</span><br><span class="line">            vis[j] = <span class="number">1</span>;</span><br><span class="line">            min_e[i][j] = w;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> k: e[j]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (vis[k.t]) <span class="keyword">continue</span>;</span><br><span class="line">                pq.push(&#123;k.w + min_e[i][j], k.t&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[N];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        in(x, y, z);</span><br><span class="line">        e[x].push_back(&#123;z, y&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dij();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// å…³é”®ä»£ç  50-76</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> j: e[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (min_e[i][j.t] == j.w) &#123;</span><br><span class="line">                ok[i][j.t] = <span class="number">1</span>;</span><br><span class="line">                g[i].push_back(j.t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (min_e[i][j] == INF || ok[i][j] || i == j) &#123;</span><br><span class="line">                ans++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k : g[i]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ok[k][j] &amp;&amp; min_e[i][j] == min_e[i][k] + min_e[k][j]) &#123;</span><br><span class="line">                    ok[i][j] = <span class="number">1</span>;</span><br><span class="line">                    g[i].push_back(j);</span><br><span class="line">                    ans++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A16/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A16/" class="post-title-link" itemprop="url">2021æ­ç”µå¤šæ ¡6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-08 18:37:50" itemprop="dateCreated datePublished" datetime="2021-08-08T18:37:50+08:00">2021-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-10 01:15:19" itemprop="dateModified" datetime="2021-08-10T01:15:19+08:00">2021-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Yes-Prime-Minister"><a href="#Yes-Prime-Minister" class="headerlink" title="Yes, Prime Minister"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7025" target="_blank" rel="noopener">Yes, Prime Minister</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å®šä¸€ä¸ªæ•°$x$ï¼Œæ±‚ä¸€ä¸ªé•¿åº¦æœ€å°çš„åŒºé—´ä½¿å¾—$x \in [l, r]$â€‹ï¼Œè¾“å‡ºè¿™ä¸ªé•¿åº¦</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å¯¹äº$l&gt;0$è€Œè¨€ï¼Œå¦‚æœ$sum{l, r}$ä¸ºè´¨æ•°ï¼Œé‚£ä¹ˆä¸€å®šæœ‰$r-l&lt;=1$ã€‚ï¼ˆå› ä¸º$sum{l, r}=\frac{(l+r)(r-l+1)}2$ï¼‰</p>
<p>è€Œå¯¹äºè´Ÿæ•°xè€Œè¨€ï¼Œæˆ‘ä»¬ä¸€å®šå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªè´Ÿæ•°lå’Œæ­£æ•°rä½¿å¾—$sum{l, r}$ä¸ºè´¨æ•°</p>
<p>å¯¹äºæ­£æ•°è€Œè¨€ï¼Œå¦‚æœ$sum{x-1, x}ã€sum{x, x+1}ã€x$â€‹éƒ½ä¸æ˜¯è´¨æ•°ï¼ŒåŒæ ·å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªè´Ÿæ•°lå’Œæ­£æ•°rä½¿å¾—$sum{l, r}$â€‹ä¸ºè´¨æ•°</p>
<p>æˆ‘ä»¬å¯ä»¥æš´åŠ›çš„å¯»æ‰¾è¿™ä¸ªr</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">3e7</span>;</span><br><span class="line"><span class="keyword">bool</span> isPrime[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(isPrime, <span class="number">1</span>, <span class="keyword">sizeof</span>(isPrime));</span><br><span class="line">    isPrime[<span class="number">0</span>] = isPrime[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isPrime[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; i * j &lt; N; j++) &#123;</span><br><span class="line">            isPrime[i * j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">    <span class="keyword">int</span> ans;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (x &gt; <span class="number">0</span> &amp;&amp; isPrime[x]) ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x &gt; <span class="number">0</span> &amp;&amp; (isPrime[<span class="number">2</span> * x - <span class="number">1</span>] || isPrime[<span class="number">2</span> * x + <span class="number">1</span>])) ans = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        x = <span class="built_in">abs</span>(x);</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">            x++;</span><br><span class="line">            <span class="keyword">if</span> (isPrime[x]) &#123;</span><br><span class="line">                ans = <span class="number">2</span> * x;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (isPrime[<span class="number">2</span> * x + <span class="number">1</span>]) &#123;</span><br><span class="line">                ans = <span class="number">2</span> * x + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="Median"><a href="#Median" class="headerlink" title="Median"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7029" target="_blank" rel="noopener">Median</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å®šnå’Œbæ•°ç»„ï¼Œæ±‚å¦‚ä½•åˆ’åˆ†[1, n]ä¸­çš„nä¸ªæ•°åˆ°mä¸ªé›†åˆä¸­ï¼Œä½¿å¾—æ¯ä¸ªé›†åˆä¸­çš„ä¸­ä½æ•°éƒ½å±äºbæ•°ç»„ã€‚</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>æ„é€  è´ªå¿ƒ?</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gt9pd4ljm5j31es0k0agb.jpg" alt="image-20210808212957112"></p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">    sort(a, a + m);</span><br><span class="line">    a[m] = n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> maxIdx = <span class="number">0</span>, imax = a[<span class="number">0</span>] - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] - a[i - <span class="number">1</span>] - <span class="number">1</span> &gt;= imax) &#123;</span><br><span class="line">            imax = a[i] - a[i - <span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line">            maxIdx = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    imax -= (n - m - imax);</span><br><span class="line">    <span class="keyword">if</span> (maxIdx &gt;= imax) <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A15/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A15/" class="post-title-link" itemprop="url">2021æ­ç”µå¤šæ ¡5</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-08-08 18:37:38" itemprop="dateCreated datePublished" datetime="2021-08-08T18:37:38+08:00">2021-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-29 21:46:01" itemprop="dateModified" datetime="2021-09-29T21:46:01+08:00">2021-09-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Another-String"><a href="#Another-String" class="headerlink" title="Another String"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7015" target="_blank" rel="noopener">Another String</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™ä¸€ä¸ªé•¿ä¸ºnçš„å­—ç¬¦ä¸²så’Œæ•´æ•°kï¼Œå¯¹äºæ¯ä¸€ä¸ª$i \in [1, n-1]$ï¼Œæ±‚$S[1, i]$ å’Œ $S[i+1, n]$æœ‰å¤šå°‘ä¸ªé•¿åº¦ç›¸ç­‰çš„å­ä¸²æ»¡è¶³ä¸åŒçš„å­—ç¬¦çš„æ•°é‡å°äºk</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>åˆ†ä¸¤æ­¥è¿›è¡Œï¼š</p>
<ol>
<li><p>å¤„ç†$G[i][j]$</p>
<p>å®šä¹‰ï¼š$G[i][j]$ä¸ºä»¥iã€jå¼€å§‹çš„å­—ç¬¦ä¸²æ»¡è¶³æ¡ä»¶çš„æœ€å¤§é•¿åº¦</p>
<p>å®šä¹‰dä¸ºj-iï¼Œå¯¹äºæ¯ä¸€ä¸ªdï¼Œç”±äº$G[i][j]$å¯ä»¥ç”±$G[i][j-]$å¾—åˆ°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨$O(n)$çš„æ—¶é—´ç”¨åŒæŒ‡é’ˆæ±‚å‡º$G[i][j]$çš„å€¼</p>
</li>
<li><p>è®¡ç®—ç­”æ¡ˆ</p>
<p>ç­”æ¡ˆçš„åŸå§‹å…¬å¼ä¸º$ans[t]=\sum_{i=1}^{t-1}\sum_{j=t}^n\min(G[i][j], t-i)$â€‹æš´åŠ›è®¡ç®—çš„è¯ä¸º$O(n^3)$ï¼Œæ˜¾ç„¶éœ€è¦ä¼˜åŒ–</p>
<p>æˆ‘ä»¬éå†æ¯ä¸€ä¸ªiï¼Œä»å¤§åˆ°å°è®¡ç®—ans[t]ï¼Œåœ¨è®¡ç®—ans[t]çš„æ—¶å€™å¯ä»¥åŸºäºans[t+1]çš„æƒ…å†µæ¥ä¿®æ”¹ï¼Œ</p>
<p>æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªcntæ•°ç»„ï¼Œ$cnt[x]$â€‹ä»£è¡¨$G[i][j]=x$â€‹çš„æ¬¡æ•°ï¼Œæ¯æ¬¡tå˜åŒ–çš„æ—¶å€™ï¼Œt-iå°±ä¼šå‡å°‘1ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†cnt[å¤§äºt-i]çš„æ•°å‡å°‘ä¸ºcnt[t-i]ï¼Œä»£è¡¨è¿™äº›æ•°éƒ½åªèƒ½å–åˆ°t-iäº†ã€‚</p>
<p>ï¼ˆçœŸçš„å¾ˆç»•â€¦ æˆ‘å†æŠŠå®˜æ–¹é¢˜è§£è´´ä¸Šæ¥ï¼‰</p>
</li>
</ol>
<img src="https://tva1.sinaimg.cn/large/008i3skNly1gt9owb4cp8j31fn0u0n3s.jpg" alt="image-20210808211347248" style="zoom:25%;" />

<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">3000</span> + <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> dp[N][N], ans[N];</span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="built_in">memset</span>(ans, <span class="number">0</span>, <span class="keyword">sizeof</span>(ans));</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k &gt;&gt; s;</span><br><span class="line">    s = <span class="string">'0'</span> + s;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// ç¬¬ä¸€æ­¥ åŒæŒ‡é’ˆå¤„ç†dpæ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> d = <span class="number">1</span>; d &lt; n; d++) &#123; <span class="comment">// l å’Œ r çš„å·®</span></span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">1</span>, cur = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> r = l;; r++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (r + d &gt; n) &#123;</span><br><span class="line">                <span class="keyword">for</span> (; l + d &lt;= n; l++) dp[l][l + d] = r - l ;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (s[r] != s[r + d]) cur++;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (cur &gt; k) &#123;</span><br><span class="line">                dp[l][l + d] = r - l;</span><br><span class="line">                <span class="keyword">if</span> (s[l] != s[l + d]) cur--;</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123; <span class="comment">// æšä¸¾å·¦åŒºé—´çš„å·¦ç«¯ç‚¹</span></span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">cnt</span><span class="params">(n + <span class="number">10</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> t = n; t &gt; i; t--) &#123; <span class="comment">// æšä¸¾åˆ†ç•Œçº¿</span></span><br><span class="line">            <span class="keyword">int</span> imax = t - i;</span><br><span class="line">            <span class="keyword">if</span> (imax &gt; dp[i][t]) &#123;</span><br><span class="line">                cnt[dp[i][t]]++;</span><br><span class="line">                sum += dp[i][t];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                cnt[imax]++;</span><br><span class="line">                sum += imax;</span><br><span class="line">            &#125;</span><br><span class="line">            cnt[imax] += cnt[imax + <span class="number">1</span>];</span><br><span class="line">            sum -= cnt[imax + <span class="number">1</span>];</span><br><span class="line">            ans[t] += sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) <span class="built_in">cout</span> &lt;&lt; ans[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Array"><a href="#Array" class="headerlink" title="Array"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7020" target="_blank" rel="noopener">Array</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™ä¸€ä¸ªæ•°ç»„ï¼Œæ±‚æœ‰å¤šå°‘ä¸ªåŒºé—´å…·æœ‰ç»å¯¹ä¼—æ•°</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gtb0lmklabj31ak0u045k.jpg" alt="IMG_0728"></p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="comment">// xu! zhe duan dai ma hui T!</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -------------------------------</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e6</span> + <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> left, right;</span><br><span class="line">    ll data;</span><br><span class="line">    ll ldata = <span class="number">0</span>, lcnt = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">node tree[<span class="number">8</span> * maxn];</span><br><span class="line"></span><br><span class="line"><span class="comment">// tree[0] -&gt; pos = 1, l = 1, r = n;</span></span><br><span class="line"><span class="comment">// å»ºçº¿æ®µæ ‘</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    tree[pos].left = l;</span><br><span class="line">    tree[pos].right = r;</span><br><span class="line">    tree[pos].data = tree[pos].ldata = tree[pos].lcnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    build(<span class="number">2</span> * pos, l, mid);</span><br><span class="line">    build(<span class="number">2</span> * pos + <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†lazyå‘ä¸‹ä¼ </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spear</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> u = <span class="number">2</span> * i; u &lt;= <span class="number">2</span> * i + <span class="number">1</span>; u++) &#123;</span><br><span class="line">        <span class="keyword">int</span> L = tree[u].left, R = tree[u].right;</span><br><span class="line">        tree[u].ldata += tree[i].ldata;</span><br><span class="line">        tree[u].lcnt += tree[i].lcnt;</span><br><span class="line">        tree[u].data += (L + R) * (R - L + <span class="number">1</span>) / <span class="number">2</span> * tree[i].lcnt - tree[i].ldata * (R - L + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    tree[i].ldata = tree[i].lcnt = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™åŒºé—´[l, r]åŠ ä¸Šx</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addInterval</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> l, <span class="keyword">int</span> r, ll x, <span class="keyword">int</span> dcnt)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt; r || tree[i].right &lt; l) &#123; <span class="comment">// åœ¨æ‰€æŸ¥è¯¢åŒºé—´å¤–</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt;= l &amp;&amp; tree[i].right &lt;= r) &#123; <span class="comment">// åŒ…æ‹¬åœ¨æ‰€æŸ¥è¯¢åŒºé—´å†…</span></span><br><span class="line">        tree[i].ldata += x;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> L = tree[i].left, R = tree[i].right;</span><br><span class="line"></span><br><span class="line">        tree[i].lcnt += dcnt;</span><br><span class="line">        tree[i].data += (L + R) * (R - L + <span class="number">1</span>) * dcnt / <span class="number">2</span> - x * (R - L + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    spear(i);</span><br><span class="line">    addInterval(<span class="number">2</span> * i, l, r, x, dcnt);</span><br><span class="line">    addInterval(<span class="number">2</span> * i + <span class="number">1</span>, l, r, x, dcnt);</span><br><span class="line">    tree[i].data = tree[<span class="number">2</span> * i].data + tree[<span class="number">2</span> * i + <span class="number">1</span>].data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚åŒºé—´[l, r]çš„å’Œ</span></span><br><span class="line"><span class="function">ll <span class="title">sum</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt; r || tree[i].right &lt; l) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt;= l &amp;&amp; tree[i].right &lt;= r) &#123; <span class="comment">// åŒ…æ‹¬åœ¨æ‰€æŸ¥è¯¢åŒºé—´å†…</span></span><br><span class="line">        <span class="keyword">return</span> tree[i].data;</span><br><span class="line">    &#125;</span><br><span class="line">    spear(i);</span><br><span class="line">    <span class="keyword">return</span> sum(<span class="number">2</span> * i, l, r) + sum(<span class="number">2</span> * i + <span class="number">1</span>, l, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a[maxn];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, x; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">        a[x].push_back(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i].size() == <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line">        a[i].push_back(n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> sz = a[i].size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sz - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">int</span> len = a[i][j + <span class="number">1</span>] - a[i][j]; <span class="comment">// å°†ä¸€ä¸ª1å’Œä»–åé¢çš„è¿ç»­-1ä¸€èµ·å¤„ç†äº†</span></span><br><span class="line">            ans += sum(<span class="number">1</span>, pre + <span class="number">1</span> - len, pre);</span><br><span class="line">            addInterval(<span class="number">1</span>, pre + <span class="number">2</span> - len, pre + <span class="number">1</span>, pre + <span class="number">1</span> - len, <span class="number">1</span>);</span><br><span class="line">            addInterval(<span class="number">1</span>, pre + <span class="number">1</span> + <span class="number">1</span>, n, -len, <span class="number">0</span>);</span><br><span class="line">            pre = pre + <span class="number">2</span> - len;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å°†ä¿®æ”¹è¿˜åŸ é¿å…æ¯æ¬¡éƒ½è¦é‡æ–°è¦†ç›–æ•°ç»„</span></span><br><span class="line">        pre = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sz - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">int</span> len = a[i][j + <span class="number">1</span>] - a[i][j];</span><br><span class="line">            addInterval(<span class="number">1</span>, pre + <span class="number">2</span> - len, pre + <span class="number">1</span>, -(pre + <span class="number">1</span> - len), <span class="number">-1</span>);</span><br><span class="line">            addInterval(<span class="number">1</span>, pre + <span class="number">1</span> + <span class="number">1</span>, n, len, <span class="number">0</span>);</span><br><span class="line">            pre = pre + <span class="number">2</span> - len;</span><br><span class="line">        &#125;</span><br><span class="line">        a[i].clear();</span><br><span class="line">        a[i].push_back(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; i++) a[i].push_back(<span class="number">0</span>);</span><br><span class="line">    build(<span class="number">1</span>, -maxn, maxn);</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A16/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A16/" class="post-title-link" itemprop="url">2021ç‰›å®¢å¤šæ ¡6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-31 18:04:13" itemprop="dateCreated datePublished" datetime="2021-07-31T18:04:13+08:00">2021-07-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-26 15:56:04" itemprop="dateModified" datetime="2021-09-26T15:56:04+08:00">2021-09-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Hamburger-Steak"><a href="#Hamburger-Steak" class="headerlink" title="Hamburger Steak"></a><a href="https://ac.nowcoder.com/acm/contest/11257/F" target="_blank" rel="noopener">Hamburger Steak</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æœ‰ n ä¸ªæ±‰å ¡æ’å’Œ m ä¸ªé”…ï¼Œç»™å‡ºæ¯ä¸ªæ±‰å ¡æ’éœ€è¦ç…çš„æ—¶é—´ $t_i$ã€‚ä¸€ä¸ªæ±‰å ¡æ’å¯ä»¥åœ¨ä¸€å£é”…ä¸­ç…å¥½ï¼Œä¹Ÿå¯ä»¥åˆ†æˆä¸¤æ¬¡åœ¨ä¸¤ä¸ªé”…ä¸­ç…å¥½ã€‚ä¸€ä¸ªé”…åŒæ—¶åªèƒ½ç…ä¸€ä¸ªæ±‰å ¡æ’ï¼Œä¸€ä¸ªæ±‰å ¡æ’åŒæ—¶åªèƒ½æ”¾åˆ°ä¸€ä¸ªé”…ä¸­ã€‚æ±‚ä¸€ä¸ªæ–¹æ¡ˆä½¿ç…å¥½æ‰€æœ‰çš„æ±‰å ¡æ’æ‰€éœ€è¦çš„æ—¶é—´æœ€å°‘ï¼ˆå°½æ—©ç…å®Œï¼‰ã€‚</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>è´ªå¿ƒ</strong>ï¼Œå¤ªå¦™äº†..</p>
<p>å‡è®¾æˆ‘ä»¬çŸ¥é“äº†æœ€å°è€—æ—¶ Tï¼Œå°±å¯ä»¥è´ªå¿ƒåœ°å°†æ¯ä¸ªé”…çš„æ—¶é—´ T ä¾æ¬¡åˆ†é…ç»™æ¯ä¸ªæ±‰å ¡æ’ï¼Œå½“å‰è¿™ä¸ªé”…æ²¡ç…å®Œçš„éƒ¨åˆ†å†ç”±ä¸‹ä¸ªé”…ç…å³å¯ã€‚ä¸ºäº†æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯æ‰€æœ‰é”…çš„æ—¶é—´å’Œå¤§äºç­‰äºæ‰€æœ‰æ±‰å ¡æ’çš„æ—¶é—´å’Œï¼Œä»¥åŠè€—æ—¶æœ€é•¿çš„æ±‰å ¡æ’ä¸ä¼šåœ¨åŒä¸€æ—¶åˆ»åˆ†åˆ°ä¸¤ä¸ªé”…ä¸­ï¼ˆè€—æ—¶å°äºå®ƒçš„è‡ªç„¶ä¹Ÿå°±æ»¡è¶³æ¡ä»¶ï¼‰ï¼Œäºæ˜¯æœ€å°è€—æ—¶ä¸º $T=\maxâ¡ { t_i,âŒˆ\frac {\sum t_i}mâŒ‰}$<font style="opacity: 0">==todo==</font></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        t = max(t, a[i]);</span><br><span class="line">        sum += a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    t = max(t, (sum + m - <span class="number">1</span>) / m);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> idx = <span class="number">0</span>; idx &lt; n; idx++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur + a[idx] &lt;= t) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; i &lt;&lt; <span class="string">' '</span> &lt;&lt; cur &lt;&lt; <span class="string">' '</span> &lt;&lt; cur + a[idx] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">2</span> &lt;&lt; <span class="string">' '</span> &lt;&lt;</span><br><span class="line">                 i + <span class="number">1</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; a[idx] + cur - t &lt;&lt; <span class="string">' '</span></span><br><span class="line">                 &lt;&lt; i &lt;&lt; <span class="string">' '</span> &lt;&lt; cur &lt;&lt; <span class="string">' '</span> &lt;&lt; t  &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cur += a[idx];</span><br><span class="line">        <span class="keyword">if</span> (cur &gt;= t) &#123;</span><br><span class="line">            cur -= t;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="Hopping-Rabbit"><a href="#Hopping-Rabbit" class="headerlink" title="Hopping Rabbit"></a><a href="https://ac.nowcoder.com/acm/contest/11257/H" target="_blank" rel="noopener">Hopping Rabbit</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>å¹³é¢ä¸Šæœ‰ n ä¸ªçŸ©å½¢é™·é˜±ï¼Œç»™å®šdï¼Œéœ€è¦æ‰¾åˆ°ä¸€ä¸ªä½ç½® (x,y)ï¼Œä½¿å¾—æ‰€æœ‰ (x+kd,y+kd) å‡ä¸è½åœ¨çŸ©å½¢ä¸­ã€‚</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>æ‰«æçº¿</strong></p>
<p>é¦–å…ˆå°†æœ¬é¢˜æŠ½è±¡ä¸€ä¸‹ï¼Œå¯ä»¥å°†è¿™nä¸ªçŸ©å½¢éƒ½å…ˆæŠ•å½±åˆ°d*då¤§å°çš„çŸ©å½¢ä¸­ï¼Œå¦‚æœè¿™ä¸ªçŸ©å½¢ä¸­æœ‰ä¸€ä¸ªç‚¹æ²¡æœ‰è¢«é™·é˜±æ ‡è®°ï¼Œåˆ™è¯¥ç‚¹æ»¡è¶³è¦æ±‚ã€‚</p>
<p>æŠ½è±¡ä¹‹åå…¶å®å°±æ˜¯è¦æ‰¾å¤šä¸ªçŸ©å½¢çš„é¢ç§¯ä¹‹å’Œäº†ï¼Œä¹‹åçš„å†…å®¹å…¶å®å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªæ‰«æçº¿çš„æ¿å­äº†ã€‚</p>
<p>è¦è¾“å‡ºæ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥éå†æ¯ä¸€ä¸ªyï¼Œå¦‚æœè¿™ä¸ªyå¯¹åº”çš„åŒºé—´é•¿åº¦å°äºdï¼Œå°±è¯´æ˜æœ‰çš„ç‚¹æ²¡æœ‰è¢«è¦†ç›–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸æ–­æŸ¥æ‰¾å…¶å·¦å³å­èŠ‚ç‚¹æ‰¾åˆ°ã€‚</p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> maxn = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> left, right;</span><br><span class="line">    ll sum; <span class="comment">//åŒºé—´è¢«æ ‡è®°è¿‡å‡ æ¬¡</span></span><br><span class="line">    ll len; <span class="comment">//åŒºé—´å¯¹åº”çš„æ­£å¼çš„é•¿åº¦</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ï¼Ÿï¼Ÿï¼Ÿï¼Ÿä¸ºä»€ä¹ˆä¸€å®šè¦å¼€6å€çš„maxnï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line">node tree[<span class="number">6</span> * maxn];</span><br><span class="line"></span><br><span class="line"><span class="comment">// tree[0] -&gt; pos = 1, l = 1, r = n;</span></span><br><span class="line"><span class="comment">// å»ºçº¿æ®µæ ‘</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    tree[pos].left = l;</span><br><span class="line">    tree[pos].right = r;</span><br><span class="line">    <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">    build(<span class="number">2</span> * pos, l, mid);</span><br><span class="line">    build(<span class="number">2</span> * pos + <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> l = x * <span class="number">2</span>, r = x * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (tree[x].sum) tree[x].len = tree[x].right - tree[x].left + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> tree[x].len = tree[l].len + tree[r].len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™åŒºé—´[l, r]åŠ ä¸Šx</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addInterval</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> l, <span class="keyword">int</span> r, ll x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt; r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt;= l &amp;&amp; tree[i].right &lt;= r) &#123; <span class="comment">// åŒ…æ‹¬åœ¨æ‰€æŸ¥è¯¢åŒºé—´å†…</span></span><br><span class="line">        tree[i].sum += x;</span><br><span class="line">        pushup(i);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tree[i].left &gt; r || tree[i].right &lt; l) &#123; <span class="comment">// åœ¨æ‰€æŸ¥è¯¢åŒºé—´å¤–</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    addInterval(<span class="number">2</span> * i, l, r, x);</span><br><span class="line">    addInterval(<span class="number">2</span> * i + <span class="number">1</span>, l, r, x);</span><br><span class="line">    pushup(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sl</span> &#123;</span> <span class="comment">//scannerLine</span></span><br><span class="line">    <span class="keyword">int</span> xl, xr, flag;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cur = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (tree[cur].left == tree[cur].right) <span class="keyword">return</span> tree[cur].left;</span><br><span class="line">        <span class="keyword">int</span> l = cur * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (tree[l].len != tree[l].right + <span class="number">1</span> - tree[l].left) cur = l;</span><br><span class="line">        <span class="keyword">else</span> cur = l + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m, d;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; m &gt;&gt; d;</span><br><span class="line">    <span class="built_in">vector</span>&lt;sl&gt; v[maxn];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="keyword">int</span> xl, yl, xr, yr;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; xl &gt;&gt; yl &gt;&gt; xr &gt;&gt; yr;</span><br><span class="line">        xl += <span class="number">1e9</span>, yl += <span class="number">1e9</span>, xr += <span class="number">1e9</span>, yr += <span class="number">1e9</span>;</span><br><span class="line">        <span class="comment">// å°†çŸ©å½¢æŠ•å½±</span></span><br><span class="line">        <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; x, y;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (xl / d == xr / d) &#123;</span><br><span class="line">            xl %= d, xr %= d;</span><br><span class="line">            x.push_back(&#123;xl, xr&#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (xr - xl &gt;= d) &#123;</span><br><span class="line">            x.push_back(&#123;<span class="number">0</span>, d&#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            xl %= d, xr %= d;</span><br><span class="line">            x.push_back(&#123;xl, d&#125;);</span><br><span class="line">            x.push_back(&#123;<span class="number">0</span>, xr&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (yl / d == yr / d) &#123;</span><br><span class="line">            yl %= d, yr %= d;</span><br><span class="line">            y.push_back(&#123;yl, yr&#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (yr - yl &gt;= d) &#123;</span><br><span class="line">            y.push_back(&#123;<span class="number">0</span>, d&#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            yl %= d, yr %= d;</span><br><span class="line">            y.push_back(&#123;yl, d&#125;);</span><br><span class="line">            y.push_back(&#123;<span class="number">0</span>, yr&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> xx : x) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> yy: y) &#123;</span><br><span class="line">                v[yy.first].push_back(&#123;xx.first, xx.second, <span class="number">1</span>&#125;);</span><br><span class="line">                v[yy.second].push_back(&#123;xx.first, xx.second, <span class="number">-1</span>&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    build(<span class="number">1</span>, <span class="number">0</span>, d - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">0</span>; y &lt; d; y++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> vv: v[y]) &#123;</span><br><span class="line">            addInterval(<span class="number">1</span>, vv.xl, vv.xr - <span class="number">1</span>, vv.flag);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tree[<span class="number">1</span>].len != d) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"YES"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; getX() - <span class="keyword">int</span>(<span class="number">1e9</span>) &lt;&lt; <span class="string">' '</span> &lt;&lt; y - <span class="keyword">int</span>(<span class="number">1e9</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"NO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Intervals-on-the-Ring"><a href="#Intervals-on-the-Ring" class="headerlink" title="Intervals on the Ring"></a><a href="https://ac.nowcoder.com/acm/contest/11257/I" target="_blank" rel="noopener">Intervals on the Ring</a></h1><h3 id="é¢˜ç›®-2"><a href="#é¢˜ç›®-2" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™ä¸€ä¸ªç¯å’Œè¯¥ç¯ä¸Šçš„æ•°ä¸ªåŒºé—´Xï¼Œæ±‚ä¸€ä¸ªåŒºé—´é›†åˆYï¼Œä½¿å¾—Yçš„äº¤é›†ç­‰äºXçš„å¹¶é›†</p>
<h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>æ¨¡æ‹Ÿ</strong></p>
<p>å…ˆæ’åºï¼Œç„¶åè¾“å‡ºç¬¬iä¸ªåŒºé—´çš„å¼€å¤´å’Œç¬¬i-1ä¸ªåŒºé—´çš„ç»“å°¾å³å¯ã€‚æ¯”èµ›çš„æ—¶å€™è„‘å­ç³Šäº†ğŸ¥²</p>
<h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------</span></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pp;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="built_in">vector</span>&lt;pp&gt; v;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        pp p;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p.first &gt;&gt; p.second;</span><br><span class="line">        v.push_back(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sort(v.begin(), v.end());</span><br><span class="line">    v.push_back(v.front());</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; m &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) <span class="built_in">cout</span> &lt;&lt; v[i].first &lt;&lt; <span class="string">' '</span> &lt;&lt; v[i - <span class="number">1</span>].second &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A15/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A15/" class="post-title-link" itemprop="url">2021ç‰›å®¢å¤šæ ¡5</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-31 18:04:13" itemprop="dateCreated datePublished" datetime="2021-07-31T18:04:13+08:00">2021-07-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-06 00:17:42" itemprop="dateModified" datetime="2021-08-06T00:17:42+08:00">2021-08-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Boxes"><a href="#Boxes" class="headerlink" title="Boxes"></a><a href="https://ac.nowcoder.com/acm/contest/11256/B" target="_blank" rel="noopener">Boxes</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æœ‰nä¸ªç›’å­ï¼Œæ¯ä¸ªç›’å­é‡Œé¢æœ‰ä¸€ä¸ªçƒï¼Œæœ‰ç­‰æ¦‚ç‡ä¸ºé»‘çƒæˆ–è€…ç™½çƒï¼Œæ¯æ¬¡æ‰“å¼€ä¸€ä¸ªç›’å­iéœ€è¦èŠ±è´¹$a_i$çš„ä»£ä»·ã€‚åŒæ—¶æœ‰ä¸€ä¸ªæ“ä½œå¯ä»¥å‘Šè¯‰ä½ å‰©ä¸‹çš„æ‰€æœ‰ç›’å­ä¸­æœ‰å‡ ä¸ªé»‘çƒï¼Œæ“ä½œçš„ä»£ä»·ä¸ºCã€‚æ±‚å¦‚æœè¦çŸ¥é“æ¯ä¸ªç›’å­ä¸­çš„çƒçš„é¢œè‰²ï¼Œæ‰€èŠ±è´¹çš„æœ€å°ä»£ä»·</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>é¦–å…ˆCæœ€å¤šåªç”¨èŠ±ä¸€æ¬¡ï¼Œä¸”å¯ä»¥åœ¨æœ€å¼€å§‹èŠ±ï¼Œæ‰€ä»¥æœ‰ä¸¤ç§ç­–ç•¥ï¼š</p>
<p>a. ç›´æ¥å…¨éƒ¨æ‰“å¼€ï¼Œä»£ä»·ï¼š$\sum w_i$</p>
<p>b. å…ˆæ’åºã€‚ç„¶åèŠ±Cçš„ä»£ä»·ï¼Œå‰©ä¸‹çš„å°±ç›¸å½“äºä¸€ä¸ªéšæœº01åºåˆ—ä»å‰å¾€åå¼€ï¼Œå¼€åˆ°ä¸€ä¸ªåç¼€å…¨æ˜¯åŒè‰²çš„ä¸ºæ­¢ã€‚ä»£ä»·ï¼š$C+\sum w_i(1-\frac1{2^{n-i}})$â€‹â€‹</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">double</span> c, a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; c;</span><br><span class="line">    <span class="keyword">double</span> tmp = <span class="number">0</span>, tmp2 = c;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        tmp += a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    sort(a, a + n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> two = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        tmp2 += a[i] * (<span class="number">1</span> - two);</span><br><span class="line">        two /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.7lf\n"</span>, min(tmp, tmp2));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="Double-Strings"><a href="#Double-Strings" class="headerlink" title="Double Strings"></a><a href="https://ac.nowcoder.com/acm/contest/11256/D" target="_blank" rel="noopener">Double Strings</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™ä¸¤ä¸ªå­—ç¬¦ä¸²Aã€B,æ±‚Aã€Bä¸­æœ‰å¤šå°‘ä¸ªé•¿åº¦ç›¸ç­‰çš„å­åºåˆ—ï¼ˆå¯ä»¥ä¸è¿ç»­ï¼‰æ»¡è¶³açš„å­—å…¸åºå°äºbã€‚</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>åŠ¨æ€è§„åˆ’dp</strong></p>
<p>aå°äºbå°±ç­‰ä»·äº ä¸€æ®µç›¸åŒçš„å‰ç¼€ + aå°äºbçš„ä¸€ä¸ªå­—æ¯ + ä¸€æ®µé•¿åº¦ç›¸åŒçš„åç¼€</p>
<p>å¤„ç†å‰ç¼€</p>
<ol>
<li><p>çŠ¶æ€å®šä¹‰ï¼šè§„å®š$dp[i][j]$â€‹â€‹è¡¨ç¤º $a[0..i]$â€‹â€‹ å’Œ $b[0..j]$â€‹ â€‹ä¸­ç›¸åŒçš„å­åºåˆ—çš„æ•°é‡ï¼ˆå­—ç¬¦ä¸²ä¸‹æ ‡ä»1å¼€å§‹ï¼Œä¸‹æ ‡ä¸º0ä»£è¡¨å­—ä¸²ä¸ºç©ºï¼‰</p>
</li>
<li><p>çŠ¶æ€è½¬ç§»ï¼š$$dp[i][j] = \begin{cases} dp[i-1][j]+dp[i][j-1]-dp[i-1][j-1] &amp; a[i] \neq b[i] \ dp[i-1][j]+dp[i][j-1] &amp; a[i]=b[j] \end{cases}$$</p>
</li>
</ol>
<p>å¤„ç†åç¼€æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯å¯ä»¥ä»¥ç±»ä¼¼äºå¤„ç†å‰ç¼€çš„æ–¹å¼å¤„ç†</p>
<p>å¦ä¸€ç§æ˜¯åˆ©ç”¨å…¬å¼ï¼š$\sum_{i=0}^{min(x, y)} C_x^i *C_y^i = \sum_{i=0}^{min(x, y)} C_x^{x-i} *C_y^i = C_{x+y}^x$â€‹ï¼Œå…¶ä¸­ç¬¬äºŒæ­¥åˆ°ç¬¬ä¸‰æ­¥å¯ä»¥ç†è§£ä¸ºï¼šä»x+yä¸ªæ•°é‡Œé¢éšæœºå–xä¸ªæ•°â€‹ã€‚</p>
<p>ç„¶åå°±æ˜¯è¦æ³¨æ„ï¼Œä¸èƒ½ç›´æ¥å­˜Cï¼Œä¼šçˆ†å†…å­˜ï¼Œéœ€è¦é¢„å¤„ç†ä¸€ä¸‹é˜¶ä¹˜æ•°å’Œå…¶é€†å…ƒã€‚ç„¶åç”¨å…¬å¼è®¡ç®—å‡ºC</p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int ll</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">5050</span>;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line">ll fac[<span class="number">2</span> * N], rev[<span class="number">2</span> * N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(ll x, ll y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (y) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &amp; <span class="number">1</span>) (ret *= x) %= mod;</span><br><span class="line">        (x *= x) %= mod;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fac[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">2</span> * N; i++) &#123;</span><br><span class="line">        fac[i] = fac[i - <span class="number">1</span>] * i % mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    rev[<span class="number">0</span>] = rev[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; N; i++) &#123;</span><br><span class="line">        rev[i] = qpow(fac[i], mod - <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">C</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (fac[x] * rev[x - y]) % mod * rev[y] % mod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    <span class="built_in">string</span> a, b;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    a = <span class="string">'0'</span> + a, b = <span class="string">'0'</span> + b;</span><br><span class="line">    <span class="keyword">int</span> n1 = a.length(), n2 = b.length();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n1; i++) dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n2; i++) dp[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n1; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n2; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] == b[j]) dp[i][j] = (dp[i - <span class="number">1</span>][j] + dp[i][j - <span class="number">1</span>]) % mod;</span><br><span class="line">            <span class="keyword">else</span> dp[i][j] = ((dp[i - <span class="number">1</span>][j] + dp[i][j - <span class="number">1</span>] - dp[i - <span class="number">1</span>][j - <span class="number">1</span>]) % mod + mod) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n1; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n2; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] &lt; b[j]) &#123;</span><br><span class="line">                (ans += ll(dp[i - <span class="number">1</span>][j - <span class="number">1</span>]) * C(n1 + n2 - i - j - <span class="number">2</span>, n1 - i - <span class="number">1</span>) % mod) %= mod;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (ans + mod) % mod &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Jewels"><a href="#Jewels" class="headerlink" title="Jewels"></a><a href="https://ac.nowcoder.com/acm/contest/11256/J" target="_blank" rel="noopener">Jewels</a></h1><h3 id="é¢˜ç›®-2"><a href="#é¢˜ç›®-2" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ä¸€ä¸ªä¸‰ç»´å¹³é¢é‡Œé¢æœ‰ï½ä¸ªå®çŸ³ï¼Œå®çŸ³ä¼šä»¥æ¯ç§’ $v_i$â€‹â€‹â€‹â€‹ çš„é€Ÿåº¦ä¸‹è½ï¼Œæ‰€ä»¥æ—¶åˆ»tå®çŸ³çš„ä½ç½®ä¸º $x_i, y_i, z_{0i}+tv_i$â€‹â€‹â€‹â€‹ï¼Œä½ æ¯ç§’é’Ÿå¯ä»¥ä»¥$x_i^2+y_i^2+z_i^2$çš„ä»£ä»·â€‹â€‹â€‹â€‹æèµ·ä¸€ä¸ªå®çŸ³ï¼Œæ±‚æèµ·æ‰€æœ‰å®çŸ³çš„æœ€å°ä»£ä»·ã€‚</p>
<h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>äºŒéƒ¨å›¾ æœ€å¤§æƒåŒ¹é…(KMç®—æ³•)</strong></p>
<p>æ¯ç§’åªèƒ½æèµ·ä¸€ä¸ªå®çŸ³ï¼Œå› æ­¤å®çŸ³å’Œæ—¶é—´å…¶å®æ˜¯ä¸€ä¸ªäºŒéƒ¨å›¾çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå…¶å®å°±è½¬åŒ–ä¸ºäº†è¿™ä¸ªäºŒéƒ¨å›¾çš„æœ€å°æƒåŒ¹é…ã€‚ä½†æ˜¯ä¸€èˆ¬æ˜¯æœ€å¤§æƒåŒ¹é…çš„æ¨¡æ¿ï¼Œåªè¦å°†å…¶ä¹˜ä¸ª-1å°±å¯ä»¥äº†ã€‚</p>
<p>å¥—ä¸ªæ¿å­å…¶å®ä»£ç å¾ˆçŸ­ã€‚</p>
<h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Data</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> inf = <span class="number">2e18</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">500</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, e[N + <span class="number">7</span>][N + <span class="number">7</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//KM</span></span><br><span class="line"><span class="keyword">int</span> mb[N + <span class="number">7</span>], vb[N + <span class="number">7</span>], ka[N + <span class="number">7</span>], kb[N + <span class="number">7</span>], p[N + <span class="number">7</span>], c[N + <span class="number">7</span>];</span><br><span class="line"><span class="keyword">int</span> qf, qb, q[N + <span class="number">7</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Bfs</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, v = <span class="number">0</span>, vl = <span class="number">0</span>, d;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) p[i] = <span class="number">0</span>, c[i] = inf;</span><br><span class="line">    mb[v] = u;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        a = mb[v], d = inf, vb[v] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> b = <span class="number">1</span>; b &lt;= n; b++)</span><br><span class="line">            <span class="keyword">if</span> (!vb[b]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (c[b] &gt; ka[a] + kb[b] - e[a][b])</span><br><span class="line">                    c[b] = ka[a] + kb[b] - e[a][b], p[b] = v;</span><br><span class="line">                <span class="keyword">if</span> (c[b] &lt; d) d = c[b], vl = b;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> b = <span class="number">0</span>; b &lt;= n; b++)</span><br><span class="line">            <span class="keyword">if</span> (vb[b]) ka[mb[b]] -= d, kb[b] += d;</span><br><span class="line">            <span class="keyword">else</span> c[b] -= d;</span><br><span class="line">        v = vl;</span><br><span class="line">    &#125; <span class="keyword">while</span> (mb[v]);</span><br><span class="line">    <span class="keyword">while</span> (v) mb[v] = mb[p[v]], v = p[v];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">KM</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) mb[i] = ka[i] = kb[i] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a = <span class="number">1</span>; a &lt;= n; a++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> b = <span class="number">1</span>; b &lt;= n; b++) vb[b] = <span class="number">0</span>;</span><br><span class="line">        Bfs(a);</span><br><span class="line">    &#125;</span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> b = <span class="number">1</span>; b &lt;= n; b++)</span><br><span class="line">        res += e[mb[b]][b];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// KMæ¿å­</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    m = n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a = <span class="number">1</span>; a &lt;= n; a++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> b = <span class="number">1</span>; b &lt;= n; b++) e[a][b] = -inf;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x, y, z, v;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y &gt;&gt; z &gt;&gt; v;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> t = <span class="number">1</span>; t &lt;= n; t++) &#123;</span><br><span class="line">            e[i][t] = -(x * x + y * y + z * z);</span><br><span class="line">            z += v;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, -KM());</span><br><span class="line"><span class="comment">//    for (int u = 1; u &lt;= n; u++) printf("%d ", mb[u]);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="King-of-Range"><a href="#King-of-Range" class="headerlink" title="King of Range"></a><a href="https://ac.nowcoder.com/acm/contest/11256/K" target="_blank" rel="noopener">King of Range</a></h1><h3 id="é¢˜ç›®-3"><a href="#é¢˜ç›®-3" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å®šæ•°ç»„$a$â€‹â€‹â€‹, å¯¹äºæ¯æ¬¡æŸ¥è¯¢ç»™å‡º$k$â€‹ï¼Œéœ€è¦å›ç­”å‡ºæ•°ç»„ä¸­æœ‰å¤šå°‘ä¸ªåŒºé—´æ»¡è¶³ $max-min &gt;= k$â€‹â€‹â€‹</p>
<h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><ol>
<li><p><strong>STè¡¨+åŒæŒ‡é’ˆ</strong></p>
<p>å› ä¸ºSTè¡¨å¯ä»¥åšåˆ°$O(nlogn)$â€‹â€‹çš„é¢„å¤„ç†ã€$O(1)$â€‹â€‹â€‹çš„æŸ¥è¯¢ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸€ç§ç±»ä¼¼äºåŒæŒ‡é’ˆçš„åšæ³•å»å¤„ç†ã€‚</p>
<p>å¦‚æœ$[l_i, r_i]$â€‹æ»¡è¶³æ¡ä»¶å¹¶ä¸”$[l_{i+1}, r_i]$â€‹ä¸æ»¡è¶³æ¡ä»¶ï¼Œå¯¹äºå³ç«¯ç‚¹$r_i$â€‹æ¥è¯´ï¼Œå·¦ç«¯ç‚¹å¯ä»¥ä»$[1, l_i]$â€‹ä»»å–ï¼Œæ­¤æ—¶å…¶å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸º$l_i$</p>
<p>è€ƒè™‘å³ç«¯ç‚¹ä¸º$r_{i+1}$çš„æƒ…å†µï¼Œæ­¤æ—¶$[l_i,r_{r+i}]$ä¸€å®šä¹Ÿæ»¡è¶³æ¡ä»¶ï¼Œä½†æ˜¯æ­¤æ—¶$[l_{i+1}, r_{i+1}]$å¯èƒ½æ»¡è¶³æ¡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å†åˆ¤æ–­ä¸€ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨STè¡¨æŸ¥è¯¢è¯¥åŒºé—´çš„maxå’Œminï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶åˆ™å·¦ç«¯ç‚¹å³ç§»ï¼Œä¸æ–­æŸ¥è¯¢ç›´åˆ°å·¦ç«¯ç‚¹+1åä¸æ»¡è¶³æ¡ä»¶</p>
<p>ç”±äºæ­¤æ—¶lã€ræŒ‡é’ˆå®é™…ä¸Šéƒ½åªä¼šæœ€å¤šéå†æ•°ç»„ä¸€éï¼Œå› æ­¤æŸ¥è¯¢çš„å¤æ‚åº¦ä¸º$O(n)$ï¼Œæ€»çš„å¤æ‚åº¦ä¸º$O(nlogn)$</p>
</li>
<li><p><strong>å•è°ƒé˜Ÿåˆ—</strong><font style="opacity: 0">==todo==</font></p>
<p>å…¶å®å’ŒSTè¡¨ä¸€æ ·ï¼Œåˆ©ç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤ræŒ‡é’ˆå‰é¢å‡ºç°çš„æ¯”ä»–å¤§kçš„æœ€å°æ•°ã€æ¯”ä»–å°kçš„æœ€å¤§æ•°ã€‚ç„¶ålä¸æ–­å‘å³ç§»åŠ¨ã€‚çœŸçš„ä¸€æ ·çš„å…¶å®</p>
</li>
</ol>
<h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// STè¡¨</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> logn = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> fMin[N][logn + <span class="number">1</span>], fMax[N][<span class="number">20</span> + <span class="number">1</span>], Logn[N + <span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> a[N], n, q;</span><br><span class="line"></span><br><span class="line"><span class="comment">// STè¡¨ é¢„å¤„ç†</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pre</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Logn[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    Logn[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt; N; i++) &#123;</span><br><span class="line">        Logn[i] = Logn[i / <span class="number">2</span>] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) fMin[i][<span class="number">0</span>] = fMax[i][<span class="number">0</span>] = a[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= logn; j++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i + (<span class="number">1</span> &lt;&lt; j) - <span class="number">1</span> &lt;= n; i++) &#123;</span><br><span class="line">            fMax[i][j] = max(fMax[i][j - <span class="number">1</span>], fMax[i + (<span class="number">1</span> &lt;&lt; (j - <span class="number">1</span>))][j - <span class="number">1</span>]);</span><br><span class="line">            fMin[i][j] = min(fMin[i][j - <span class="number">1</span>], fMin[i + (<span class="number">1</span> &lt;&lt; (j - <span class="number">1</span>))][j - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">getMax</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> s = Logn[y - x + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> max(fMax[x][s], fMax[y - (<span class="number">1</span> &lt;&lt; s) + <span class="number">1</span>][s]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">getMin</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> s = Logn[y - x + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> min(fMin[x][s], fMin[y - (<span class="number">1</span> &lt;&lt; s) + <span class="number">1</span>][s]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">    pre();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> k, p = <span class="number">0</span>;</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">1</span>; r &lt;= n; r++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (p &lt; r &amp;&amp; getMax(p + <span class="number">1</span>, r) - a[r] &gt; k) p++;</span><br><span class="line">            <span class="keyword">while</span> (p &lt; r &amp;&amp; a[r] - getMin(p + <span class="number">1</span>, r) &gt; k) p++;</span><br><span class="line">            ans += p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•è°ƒé˜Ÿåˆ—</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int ll</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="keyword">int</span> k;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; k;</span><br><span class="line">        <span class="built_in">deque</span>&lt;<span class="keyword">int</span>&gt; imin, imax;</span><br><span class="line"></span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; n; r++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!imin.empty() &amp;&amp; a[imin.back()] &gt; a[r]) imin.pop_back();</span><br><span class="line">            imin.push_back(r);</span><br><span class="line">            <span class="keyword">while</span> (!imax.empty() &amp;&amp; a[imax.back()] &lt; a[r]) imax.pop_back();</span><br><span class="line">            imax.push_back(r);</span><br><span class="line">            <span class="keyword">while</span> (!imin.empty() &amp;&amp; !imax.empty() &amp;&amp; a[imax.front()] - a[imin.front()] &gt; k) &#123;</span><br><span class="line">                <span class="keyword">if</span> (imax.front() == l) imax.pop_front();</span><br><span class="line">                <span class="keyword">if</span> (imin.front() == l) imin.pop_front();</span><br><span class="line">                l++;</span><br><span class="line">            &#125;</span><br><span class="line">            ans += r - l + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; n * (n + <span class="number">1</span>) / <span class="number">2</span> - ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A13/" class="post-title-link" itemprop="url">2021æ­ç”µå¤šæ ¡3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-30 21:08:33" itemprop="dateCreated datePublished" datetime="2021-07-30T21:08:33+08:00">2021-07-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-03 03:11:17" itemprop="dateModified" datetime="2021-08-03T03:11:17+08:00">2021-08-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Forgiving-Matching"><a href="#Forgiving-Matching" class="headerlink" title="Forgiving Matching"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=6975" target="_blank" rel="noopener">Forgiving Matching</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ä¸¤ä¸ªå­—ç¬¦ä¸² $S,\ T$â€‹ï¼Œåˆ†åˆ«é•¿ $n,\ m$â€‹ ä»…åŒ…å«æ•°å­—å’Œ*ï¼Œå¯¹äº$0&lt;=k&lt;=m$â€‹â€‹ï¼Œé—®åœ¨å¯ä»¥å…è®¸è‡³å¤šæœ‰ $k$ ä½åŒ¹é…ä¸æˆåŠŸçš„æƒ…å†µä¸‹éƒ½å¤šå°‘ç§åŒ¹é…æ–¹æ¡ˆ</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><ol>
<li><p>æšä¸¾0-9ï¼Œä½¿ç”¨FFTå¤„ç†</p>
<p>å¦‚æœä¸è€ƒè™‘é€šé…ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥ä¾æ¬¡æšä¸¾0-9ï¼Œä½¿ç”¨FFTå¤„ç†å‡ºâ€œåªè€ƒè™‘è¿™ä¸ªæ•°å­—çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåŒ¹é…ç‚¹èƒ½å¤Ÿæœ‰å‡ ä¸ªåŒ¹é…æˆåŠŸçš„åœ°æ–¹â€ï¼Œé‚£ä¹ˆæœ€ç»ˆå¯¹äºè¿™ä¸ªåŒ¹é…ç‚¹è€Œè¨€ï¼ŒåŒ¹é…æˆåŠŸçš„ä½æ•°å°±æ˜¯0-9ä¹‹å’Œã€‚</p>
<p>ä½¿ç”¨FFTå¤„ç†çš„æ–¹æ³•æ˜¯ï¼šå°†å­—ç¬¦ä¸²è½¬ä¸ºå­—ç¬¦ä¸²çš„å¤šé¡¹å¼è¡¨è¾¾å¼ï¼Œå¦‚æœæˆ‘ä»¬å½“å‰æšä¸¾åˆ°äº†xï¼Œé‚£ä¹ˆæ‰€æœ‰ç­‰äºxçš„ä½ç½®èµ‹ä¸º1ï¼Œå…¶ä»–èµ‹ä¸º0ï¼Œå¯¹äºSã€Téƒ½è¿™æ ·å¤„ç†ä¹‹åä¹‹åå†å°†Tç¿»è½¬ï¼Œè¿™æ—¶å€™å¦‚æœS*Tçš„æŸä¸€ä½ä¸º$z(z \neq 0)$ï¼Œåˆ™ä»£è¡¨è¿™ä½æ˜¯åŒ¹é…ç‚¹æ—¶ï¼Œæ•°å­—xå¯ä»¥æœ‰zä½åŒ¹é…æˆåŠŸã€‚</p>
</li>
<li><p>æ±‚å‡ºåŒ¹é…æ•°</p>
<p>å¯¹äºæ¯ä¸€ä¸ªä½ç½®æ¥è¯´ï¼Œå¦‚æœå·²ç»æœ‰xä¸ªæ•°å­—åŒ¹é…æˆåŠŸäº†ï¼Œé‚£ä¹ˆå¦‚æœå†è‡³å°‘æä¾› $k(k + x=m)$ æ¬¡å®¹é”™æœºä¼šï¼Œå°±å¯ä»¥æˆåŠŸåŒ¹é…äº†ã€‚</p>
<p>æœ€åï¼Œå¦‚æœè€ƒè™‘é€šé…ç¬¦çš„è¯ï¼Œæ¯ä¸ªé€šé…ç¬¦éƒ½å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€æ¬¡å®¹é”™æœºä¼šï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸¤ä¸ªé€šé…ç¬¦å¯¹åº”ä¸Šäº†ï¼Œä¹Ÿåªèƒ½çœ‹ä½œæ˜¯ä¸€æ¬¡å®¹é”™æœºä¼šï¼Œè¿™é‡Œå¯¹äºé€šé…ç¬¦çš„å¤„ç†å…¶å®å’Œä¹‹å‰æ•°å­—çš„å¤„ç†æ˜¯ä¸€è‡´çš„</p>
<p>é‚£ä¹ˆå…¬å¼å°±å˜ä¸ºäº† $k = m - æ•°å­—åŒ¹é…æˆåŠŸä¸ªæ•° + å®¹é”™ç¬¦ä¸ªæ•° - å®¹é”™ç¬¦åŒ¹é…æˆåŠŸä¸ªæ•°$,è¿™æ ·ç®—å‡ºæ¥çš„kæ˜¯æ°å¥½ç›¸ç­‰çš„æƒ…å†µï¼Œåªè¦æœ€åå†è·‘ä¸€éå‰ç¼€å’Œå°±å¯ä»¥äº†ã€‚</p>
</li>
</ol>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//#pragma GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"><span class="comment">//#define int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -------------------------------</span></span><br><span class="line"><span class="comment">// è¿™ä»½ä»£ç ä¼šT åˆ«çœ‹äº† æˆ‘è‡ªå·±è·‘äº†éæ•°æ® ç­”æ¡ˆæ˜¯å¯¹çš„</span></span><br><span class="line"><span class="comment">// å¤æ‚åº¦ä¹Ÿæ˜¯okçš„å•Š ä¸çŸ¥é“ä¸ºå•¥ä¼šT ğŸ¤«</span></span><br><span class="line"><span class="comment">// æ˜å¤©(ä»Šå¤©)å†é—®é—®ï¼Œè‡ªå·±å®åœ¨æ˜¯è°ƒä¸å‡ºæ¥äº† æˆ‘è¦ç¡è§‰äº†äº†äº†</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">6e5</span> + <span class="number">1000</span>;</span><br><span class="line"><span class="comment">//const int maxn = 20;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, k, sm;</span><br><span class="line"><span class="keyword">int</span> tax[maxn];</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">complex</span>&lt;<span class="keyword">double</span>&gt; F[<span class="number">11</span>][maxn], G[<span class="number">11</span>][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FFT</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">complex</span>&lt;<span class="keyword">double</span>&gt; *A, <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; ++i)</span><br><span class="line">        <span class="keyword">if</span> (tax[i] &gt; i) &#123;</span><br><span class="line">            <span class="built_in">std</span>::swap(A[i], A[tax[i]]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">2</span>, M = <span class="number">1</span>; len &lt;= N; M = len, len &lt;&lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        std::complex&lt;double&gt; W(cos(PI / M), sin(PI / M)), w(1.0, 0.0);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> L = <span class="number">0</span>, R = len - <span class="number">1</span>; R &lt;= N; L += len, R += len) &#123;</span><br><span class="line">            <span class="keyword">auto</span> w0 = w;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> p = L, lim = L + M; p &lt; lim; ++p) &#123;</span><br><span class="line">                <span class="keyword">auto</span> x = A[p] + w0 * A[p + M], y = A[p] - w0 * A[p + M];</span><br><span class="line">                A[p] = x;</span><br><span class="line">                A[p + M] = y;</span><br><span class="line">                w0 *= W;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MakeRev</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> d = N &gt;&gt; <span class="number">1</span>, p = <span class="number">0</span>;</span><br><span class="line">    tax[p++] = <span class="number">0</span>;</span><br><span class="line">    tax[p++] = d;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> w = <span class="number">2</span>; w &lt;= N; w &lt;&lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        d &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> p0 = <span class="number">0</span>; p0 &lt; w; ++p0) &#123;</span><br><span class="line">            tax[p++] = tax[p0] | d;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sm = n + m + <span class="number">2</span>;</span><br><span class="line">    k = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (k &lt;= sm) k &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    MakeRev(k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans[maxn];</span><br><span class="line"><span class="keyword">int</span> pre[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m; i++) ans[i] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) pre[i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= k + <span class="number">100</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">11</span>; j++)</span><br><span class="line">            F[j][i] = G[j][i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">string</span> s, t;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s &gt;&gt; t;</span><br><span class="line">    reverse(t.begin(), t.end());</span><br><span class="line"><span class="comment">//    s = '0' + s, t = '0' + t;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">'*'</span>) F[<span class="number">10</span>][i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> F[s[i] - <span class="string">'0'</span>][i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (t[i] == <span class="string">'*'</span>) G[<span class="number">10</span>][i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> G[t[i] - <span class="string">'0'</span>][i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line">        FFT(F[i], k);</span><br><span class="line">        FFT(G[i], k);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; ++j) &#123;</span><br><span class="line">            F[i][j] *= G[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        FFT(F[i], k);</span><br><span class="line">        <span class="built_in">std</span>::reverse(F[i] + <span class="number">1</span>, F[i] + k);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= sm; ++j) &#123;</span><br><span class="line">            F[i][j] = <span class="keyword">int</span>((F[i][j].real()) / k + <span class="number">0.5</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// preä»1å¼€å§‹...</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        pre[i] = pre[i - <span class="number">1</span>] + (s[i - <span class="number">1</span>] == <span class="string">'*'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> tStar = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        tStar += (t[i] == <span class="string">'*'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m - <span class="number">1</span>; i &lt; n; i++) &#123; <span class="comment">// å¯¹äºæ¯ä¸€ä¸ªã€ŒåŒ¹é…ç‚¹ã€</span></span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">9</span>; j++) &#123;</span><br><span class="line">            sum += <span class="keyword">int</span>(F[j][i].real());</span><br><span class="line">        &#125;</span><br><span class="line">        ans[m - (sum + tStar + pre[i + <span class="number">1</span>] - pre[i - m + <span class="number">1</span>] - <span class="keyword">int</span>(F[<span class="number">10</span>][i].real()))]++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) ans[i] += ans[i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Photoshop-Layers"><a href="#Photoshop-Layers" class="headerlink" title="Photoshop Layers"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=6979" target="_blank" rel="noopener">Photoshop Layers</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æœ‰nä¸ªpså›¾å±‚ï¼Œå›¾å±‚åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§ä¼šè¦†ç›–æ‰ä¹‹å‰çš„å›¾å±‚ï¼Œåªæ˜¾ç¤ºè‡ªå·±ï¼Œå¦å¤–ä¸€ç§ä¼šå°†è‡ªå·±çš„rgbå’Œå‰é¢çš„å åŠ åä¸€èµ·æ˜¾ç¤ºã€‚å¯¹äºæ¯æ¬¡è¯¢é—®[l, r]ï¼Œæ±‚å‡ºè¿™ä¸ªåŒºé—´çš„å›¾å±‚å åŠ åæœ€ç»ˆæ˜¾ç¤ºæ•ˆæœã€‚</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å¦‚æœåªæœ‰ç¬¬äºŒç§å›¾å±‚ï¼Œç”¨å‰ç¼€å’Œå¤„ç†ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œä½†æ˜¯å¯¹äºç¬¬ä¸€ç§å›¾å±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„æ ‡è®°å½“å‰ä½ç½®å‰å‡ºç°çš„æœ€åä¸€ä¸ªç¬¬ä¸€ç§å›¾å±‚xï¼Œæœ€ååœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¦‚æœåŒºé—´[l, r]åŒ…å«äº†xï¼Œé‚£ä¹ˆå°±ç›¸å½“äºæŸ¥è¯¢[x, r]</p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"><span class="comment">//#define int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> mode, r, g, b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, q;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line">node a[N], pre[N];</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; to10;</span><br><span class="line"><span class="keyword">char</span> to16[<span class="number">16</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)to10[i + <span class="string">'0'</span>] = i, to16[i] = i + <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)to10[i + <span class="string">'A'</span>] = i + <span class="number">10</span>, to16[i + <span class="number">10</span>] = i + <span class="string">'A'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> preMode1[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="built_in">string</span> tmp;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i].mode &gt;&gt; tmp;</span><br><span class="line">        a[i].r = to10[tmp[<span class="number">0</span>]] * <span class="number">16</span> + to10[tmp[<span class="number">1</span>]];</span><br><span class="line">        a[i].g = to10[tmp[<span class="number">2</span>]] * <span class="number">16</span> + to10[tmp[<span class="number">3</span>]];</span><br><span class="line">        a[i].b = to10[tmp[<span class="number">4</span>]] * <span class="number">16</span> + to10[tmp[<span class="number">5</span>]];</span><br><span class="line">        preMode1[i] = (a[i].mode == <span class="number">1</span> ? i : preMode1[i - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        pre[i].r = a[i].r + pre[i - <span class="number">1</span>].r;</span><br><span class="line">        pre[i].g = a[i].g + pre[i - <span class="number">1</span>].g;</span><br><span class="line">        pre[i].b = a[i].b + pre[i - <span class="number">1</span>].b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> l, r;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; l &gt;&gt; r;</span><br><span class="line">        l = max(l, preMode1[r]);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; to16[min(pre[r].r - pre[l - <span class="number">1</span>].r, <span class="number">255</span>) / <span class="number">16</span>] &lt;&lt; to16[min(pre[r].r - pre[l - <span class="number">1</span>].r, <span class="number">255</span>) % <span class="number">16</span>];</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; to16[min(pre[r].g - pre[l - <span class="number">1</span>].g, <span class="number">255</span>) / <span class="number">16</span>] &lt;&lt; to16[min(pre[r].g - pre[l - <span class="number">1</span>].g, <span class="number">255</span>) % <span class="number">16</span>];</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; to16[min(pre[r].b - pre[l - <span class="number">1</span>].b, <span class="number">255</span>) / <span class="number">16</span>] &lt;&lt; to16[min(pre[r].b - pre[l - <span class="number">1</span>].b, <span class="number">255</span>) % <span class="number">16</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Rise-in-Price"><a href="#Rise-in-Price" class="headerlink" title="Rise in Price"></a><a href="https://acm.hdu.edu.cn/showproblem.php?pid=6981" target="_blank" rel="noopener">Rise in Price</a></h1><h3 id="é¢˜ç›®-2"><a href="#é¢˜ç›®-2" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æœ‰ä¸€ä¸ªn*nçš„çŸ©å½¢ï¼Œåªèƒ½å‘å³/å‘ä¸‹ç§»åŠ¨ã€‚æ¯æ¬¡ç§»åŠ¨ä½ çš„å®çŸ³æ•°é‡ä¼šå¢åŠ $w_{i, j}$ï¼Œå®çŸ³ä»·å€¼ä¼šå¢åŠ $p_{i, j}$ï¼Œæ±‚æœ€ååˆ°è¾¾ç»ˆç‚¹åæœ€å¤šæœ‰å¤šå°‘é’±ã€‚</p>
<h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å¯¹äºæ¯ä¸€ä¸ªç‚¹ç»´æŠ¤ä¸€ä¸ªvectorï¼Œä¿å­˜ç€åˆ°è¾¾è¿™ä¸ªç‚¹èƒ½å–åˆ°çš„{æ•°é‡, ä»·å€¼}ï¼Œå¦‚æœæœ‰ä¸€ä¸ªçŠ¶æ€çš„æ•°é‡å’Œä»·å€¼éƒ½å°äºå¦ä¸€ä¸ªçŠ¶æ€ï¼Œé‚£å°±å°†å…¶èˆå¼ƒã€‚</p>
<p>ä¸»è¦å°±æ˜¯æ³¨æ„ï¼ŒçŠ¶æ€åœ¨è½¬ç§»çš„æ—¶å€™ï¼Œè¦ç”¨ç±»ä¼¼äºå½’å¹¶æ’åºçš„ä¸€ç§åšæ³•ï¼Œä¸ç„¶ä¼šT</p>
<h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"><span class="comment">//#define int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">110</span>;</span><br><span class="line"><span class="comment">//typedef pair&lt;int, int&gt; pp;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pp</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> f, s;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> pp &amp;p1) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> !(f &gt;= p1.f &amp;&amp; s &gt;= p1.s || f &lt;= p1.f &amp;&amp; s &lt;= p1.s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pp <span class="keyword">operator</span>+(<span class="keyword">const</span> pp &amp;p1) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;f + p1.f, s + p1.s&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;pp&gt; <span class="title">merge</span><span class="params">(<span class="built_in">vector</span>&lt;pp&gt; p1, <span class="built_in">vector</span>&lt;pp&gt; p2, pp x)</span> </span>&#123;</span><br><span class="line">    vector&lt;pp&gt; ppp1(p1), ppp2(p2);</span><br><span class="line">    <span class="built_in">vector</span>&lt;pp&gt; ret;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> sz1 = p1.size(), sz2 = p2.size();</span><br><span class="line">    <span class="keyword">int</span> maxS = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; sz1 || j &lt; sz2) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i&lt;sz1 &amp;&amp;( j == sz2 || p1[i].f &gt; p2[j].f)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p1[i].s &gt; maxS) &#123;</span><br><span class="line">                maxS = p1[i].s;</span><br><span class="line">                ret.push_back(p1[i] + x);</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (p2[j].s &gt; maxS) &#123;</span><br><span class="line">                maxS = p2[j].s;</span><br><span class="line">                ret.push_back(p2[j] + x);</span><br><span class="line">            &#125;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pp a[N][N];</span><br><span class="line"><span class="built_in">vector</span>&lt;pp&gt; dp[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a[i][j].f;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; a[i][j].s;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) dp[i][j].clear();</span><br><span class="line"></span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>].push_back(a[<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        dp[i][<span class="number">1</span>].push_back(dp[i - <span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>] + a[i][<span class="number">1</span>]);</span><br><span class="line">        dp[<span class="number">1</span>][i].push_back(dp[<span class="number">1</span>][i - <span class="number">1</span>][<span class="number">0</span>] + a[<span class="number">1</span>][i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            dp[i][j] = merge(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>], a[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x: dp[n][n]) ans = max(ans, ll(x.f) * x.s);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A14/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A14/" class="post-title-link" itemprop="url">2021ç‰›å®¢å¤šæ ¡4</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-28 14:05:38" itemprop="dateCreated datePublished" datetime="2021-07-28T14:05:38+08:00">2021-07-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-02 20:23:39" itemprop="dateModified" datetime="2021-08-02T20:23:39+08:00">2021-08-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Sample-Game"><a href="#Sample-Game" class="headerlink" title="Sample Game"></a><a href="https://ac.nowcoder.com/acm/contest/11255/B" target="_blank" rel="noopener">Sample Game</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å®š[1, n]ä¸­æ¯ä¸ªæ•°çš„æ¦‚ç‡ï¼Œæ¯æ¬¡å¯ä»¥ä»¥ $p_i$ çš„æ¦‚ç‡é€‰æ‹©iï¼Œå¦‚æœiå¤§äºç­‰äºä¹‹å‰é€‰æ‹©çš„æ‰€æœ‰æ•°ï¼Œåˆ™ç»§ç»­é€‰æ‹©ï¼Œå¦åˆ™ç­”æ¡ˆç­‰äºå½“å‰é€‰æ‹©çš„æ•°çš„é•¿åº¦å¹³æ–¹$len^2$ã€‚æ±‚ç­”æ¡ˆçš„æœŸæœ›ã€‚</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>ç”Ÿæˆå‡½æ•°</strong><a href="https://oi-wiki.org/math/gen-func/intro/" target="_blank" rel="noopener">https://oi-wiki.org/math/gen-func/intro/</a></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gsycp8yiz1j31lr0lqwj5.jpg" alt="image-20210730015030424"></p>
<p>ï¼ˆæˆ‘æœ‰ç½ªï¼Œå½“æ—¶åœ¨å‹¾è¡¥é¢˜çš„æ—¶å€™çœ‹è¿™é¢˜çš„è§£æï¼Œçœ‹å°±ä¸€ä¸ªå…¬å¼ï¼Œåº”è¯¥ä¸ä¼šå¾ˆå¤æ‚å§ï¼Œä½†æ˜¯æ²¡æƒ³åˆ°è¿˜è¦ç”¨ç”Ÿæˆå‡½æ•°ï¼Œè€Œä¸”â€¦ä¸­é—´è¯æ˜æˆ‘ä¹Ÿçœ‹ä¸æ‡‚â€¦å±äºæ˜¯æ— æ•ˆè¡¥é¢˜äº†â€¦20çº§çš„åŒå­¦å°±å½“å­¦å­¦æ€ä¹ˆæ±‚é€†å…ƒå§ï¼Œ19çº§åŒå­¦å°±è§è¯†ä¸€ä¸‹ä¸–ç•Œçš„å¹¿é˜”å’Œæˆ‘çš„å¼±æ™ºå§ğŸŒï¼‰</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    T = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> mod = <span class="number">998244353</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (y) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &amp; <span class="number">1</span>) (ret *= x) %= mod;</span><br><span class="line">        (x *= x) %= mod;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">one_</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="comment">// æ±‚ 1/x</span></span><br><span class="line">    <span class="keyword">return</span> qpow(x, mod - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ll n, p[N], sum = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p[i];</span><br><span class="line">        sum += p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    sum = one_(sum);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        (p[i] *= sum) %= mod;</span><br><span class="line">    &#125;</span><br><span class="line">    ll F_1 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        (F_1 *= <span class="number">1</span> * one_(<span class="number">1</span> - p[i])) %= mod;</span><br><span class="line">    &#125;</span><br><span class="line">    ll F_1_ = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        (F_1_ += (p[i] * one_(<span class="number">1</span> - p[i]))) %= mod;</span><br><span class="line">    &#125;</span><br><span class="line">    (((F_1_ *= <span class="number">2</span>) %= mod) *= F_1) %= mod;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ((F_1_ + F_1) % mod + mod) % mod &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Tree-Xor"><a href="#Tree-Xor" class="headerlink" title="Tree Xor"></a><a href="https://ac.nowcoder.com/acm/contest/11255/E" target="_blank" rel="noopener">Tree Xor</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™ä¸€æ£µæ ‘ï¼Œå·²çŸ¥æ ‘ä¸Šæ¯ä¸€ä¸ªç‚¹çš„ $w_i$â€‹â€‹ ä¸€å®šè½åœ¨ $[l_i, r_i]$â€‹â€‹ ä¸­ï¼Œå¹¶ä¸”å·²çŸ¥æ¯æ¡è¾¹ $(u, v)$â€‹â€‹ çš„å€¼ $x$ï¼Œæœ‰ $w_u \oplus w_v = x$â€‹â€‹â€‹â€‹ã€‚æ±‚è¿™æ£µæ ‘æœ‰å¤šå°‘ç§å¯èƒ½æ€§</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>01å­—å…¸æ ‘</strong></p>
<p>é¦–å…ˆæ ¹æ®å¼‚æˆ–çš„æ€§è´¨ï¼Œç”¨ä¸€ä¸ªDFSå¯ä»¥æ±‚åˆ°æ¯ä¸€ä¸ªç‚¹åˆ°åˆå§‹ç‚¹(å‡è®¾æ˜¯1å·ç‚¹)çš„å¼‚æˆ–å€¼xï¼Œé‚£ä¹ˆç­”æ¡ˆå°±æ˜¯ æ¯ä¸€ä¸ªåŒºé—´å¼‚æˆ–ä¸Šxæ‰€å½¢æˆçš„åŒºé—´çš„äº¤é›†ã€‚</p>
<p>ã€Œ01å­—å…¸æ ‘é€šå¸¸ç”¨æ¥å¤„ç†å¼‚æˆ–çš„é—®é¢˜ã€ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªè¿™æ ·çš„01å­—å…¸æ ‘ï¼Œæ¯æ¬¡å¯ä»¥ä¿®æ”¹ä¸€ä¸ªåŒºé—´å¼‚æˆ–ä¸Šä¸€ä¸ªå€¼æ‰€å½¢æˆçš„åŒºé—´ã€‚å¯ä»¥åˆ©ç”¨ä¸€ä¸ªç±»ä¼¼äºçº¿æ®µæ ‘çš„lazyæ ‡ç­¾å¤„ç†ã€‚</p>
<p>å‰©ä¸‹çš„å°±çœ‹æ³¨é‡Šå§</p>
<p>==REDO</p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"><span class="comment">//#define int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -------------------------------</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">31</span>; <span class="comment">// æœ€å¤§ä½æ•°</span></span><br><span class="line"><span class="keyword">int</span> tol = <span class="number">1</span>; <span class="comment">// èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">int</span> val[<span class="number">32</span> * N * <span class="number">4</span>]; <span class="comment">// ç‚¹çš„æƒå€¼</span></span><br><span class="line"><span class="keyword">int</span> ch[<span class="number">32</span> * N * <span class="number">4</span>][<span class="number">2</span>]; <span class="comment">// å·¦å³å­©å­çš„ä½ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123; <span class="comment">// ç±»ä¼¼çº¿æ®µæ ‘lazy</span></span><br><span class="line">    val[ch[u][<span class="number">0</span>]] += val[u];</span><br><span class="line">    val[ch[u][<span class="number">1</span>]] += val[u];</span><br><span class="line">    val[u] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> w, <span class="keyword">int</span> x)</span> </span>&#123; <span class="comment">// å°† [0, R]^w æ‰€å½¢æˆçš„åŒºé—´ += x</span></span><br><span class="line">    <span class="keyword">int</span> u = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (r &lt; <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = M; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">int</span> R = (r &gt;&gt; i) &amp; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> W = (w &gt;&gt; i) &amp; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!ch[u][<span class="number">0</span>]) &#123; <span class="comment">//å¦‚æœå½“å‰èŠ‚ç‚¹çš„å­æœªè¢«è®¿é—®è¿‡</span></span><br><span class="line">            ch[u][<span class="number">0</span>] = tol++;</span><br><span class="line">            ch[u][<span class="number">1</span>] = tol++;</span><br><span class="line">            pushdown(u);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (R) &#123; <span class="comment">// å¦‚æœRæ˜¯1ï¼Œå‡è®¾wæ˜¯0ï¼Œç­”æ¡ˆåŒºé—´è¿™ä½å–0ï¼Œå’Œwå¼‚æˆ–å€¼ä¸º0ï¼Œä¸€å®šå°äºR</span></span><br><span class="line">          <span class="comment">// ä¹Ÿå°±æ˜¯è¯´ R ^ W ^ 1 å¯¹åº”çš„å­æ ‘å¼‚æˆ–åä¸€å®šéƒ½ä¼šå°äºr          </span></span><br><span class="line">            val[ch[u][R ^ W ^ <span class="number">1</span>]] += x;</span><br><span class="line">        &#125;</span><br><span class="line">        u = ch[u][R ^ W];</span><br><span class="line">    &#125;</span><br><span class="line">    val[u] += x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> i)</span> </span>&#123; <span class="comment">// æ‰¾[1, n]ä¸­ç‚¹æƒä¸ºnçš„èŠ‚ç‚¹æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (ch[u][<span class="number">0</span>]) &#123;</span><br><span class="line">        pushdown(u);</span><br><span class="line">        <span class="keyword">return</span> query(ch[u][<span class="number">0</span>], i - <span class="number">1</span>) + query(ch[u][<span class="number">1</span>], i - <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (val[u] == n) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> &lt;&lt; (i + <span class="number">1</span>); <span class="comment">// ç»ˆç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pp;</span><br><span class="line">pp interval[N];</span><br><span class="line"><span class="keyword">int</span> w[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;pp&gt; e[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    vis[x] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> k: e[x]) &#123;</span><br><span class="line">        <span class="keyword">int</span> y = k.first;</span><br><span class="line">        <span class="keyword">if</span> (vis[y]) <span class="keyword">continue</span>;</span><br><span class="line">        w[y] = w[x] ^ k.second;</span><br><span class="line">        dfs(y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">cin</span> &gt;&gt; interval[i].first &gt;&gt; interval[i].second;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x, y, z;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y &gt;&gt; z;</span><br><span class="line">        e[x].push_back(&#123;y, z&#125;);</span><br><span class="line">        e[y].push_back(&#123;x, z&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        add(interval[i].second, w[i], <span class="number">1</span>);</span><br><span class="line">        add(interval[i].first - <span class="number">1</span>, w[i], <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; query(<span class="number">0</span>, M) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Inverse-Pair"><a href="#Inverse-Pair" class="headerlink" title="Inverse Pair"></a><a href="https://ac.nowcoder.com/acm/contest/11255/I" target="_blank" rel="noopener">Inverse Pair</a></h1><h3 id="é¢˜ç›®-2"><a href="#é¢˜ç›®-2" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å®šä¸€ä¸ªæ’åˆ—ï¼Œå¯ä»¥å¯¹ä»»æ„æ•°å­—+1ï¼ˆæ¯ä¸ªæ•°å­—æœ€å¤šåŠ ä¸€æ¬¡ï¼‰ï¼Œé—®é€†åºå¯¹æ•°é‡æœ€å°‘ä¸º</p>
<h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å…ˆç”¨<strong>æ ‘çŠ¶æ•°ç»„ or å½’å¹¶æ’åº</strong>æ±‚å‡ºåŸå§‹æ•°ç»„é€†åºå¯¹æ•°é‡</p>
<p>è€ƒè™‘ï¼šæ¯æ¬¡éƒ½æ¯ä¸ªæ•°å­—xåŠ ä¸€åï¼Œåªæœ‰å½“x+1åœ¨xçš„å‰é¢æ—¶ï¼Œé€†åºå¯¹çš„æ•°é‡æ‰ä¼šå°‘ä¸€ï¼Œå› æ­¤ç”¨ä¸€ä¸ªvisè¡¨ç¤ºå‰é¢æœ‰æ²¡æœ‰å‡ºç°è¿‡x+1å°±å¯ä»¥äº†ã€‚ä¸»è¦å°±æ˜¯æ±‚é€†åºå¯¹</p>
<h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    T = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n, a[N];</span><br><span class="line">ll ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> tree[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lb</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x &amp; (-x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> x)</span> </span>&#123; <span class="comment">// posä½ç½® + x</span></span><br><span class="line">    <span class="keyword">while</span> (pos &lt;= n) &#123;</span><br><span class="line">        tree[pos] += x;</span><br><span class="line">        pos += lb(pos);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> r)</span> </span>&#123; <span class="comment">// [1, r] å’Œ</span></span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (r &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        cnt += tree[r];</span><br><span class="line">        r -= lb(r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        ans += i - query(a[i]);</span><br><span class="line">        insert(a[i], <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> &amp;x = a[i];</span><br><span class="line">        <span class="keyword">if</span> (vis[x + <span class="number">1</span>]) ans--;</span><br><span class="line">        <span class="keyword">else</span> vis[x] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Average"><a href="#Average" class="headerlink" title="Average"></a><a href="https://ac.nowcoder.com/acm/contest/11255/J" target="_blank" rel="noopener">Average</a></h1><h3 id="é¢˜ç›®-3"><a href="#é¢˜ç›®-3" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æ±‚æ•°ç»„ä¸­åŒºé—´é•¿åº¦ä¸å°äºLçš„æœ€å¤§å¹³å‡å€¼</p>
<h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>äºŒåˆ†ç­”æ¡ˆ</strong>ï¼Œå‡è®¾å½“å‰å¹³å‡æ—¶ä¸ºxçœ‹å¯è¡Œä¸å¯è¡Œã€‚åˆ¤æ–­æ—¶ç”¨å‰ç¼€å’Œåˆ¤æ–­ï¼Œå°†æ¯ä¸ªæ•°éƒ½å‡å»xï¼Œçœ‹å­˜ä¸å­˜åœ¨ä¸€ä¸ªé•¿åº¦å¤§äºLçš„åŒºé—´å’Œä¸ºéè´Ÿæ•°</p>
<p>==REDO==</p>
<h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"><span class="comment">//#define int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    T = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">findMax</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;sum, <span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; <span class="title">pre</span><span class="params">(n + <span class="number">1</span>)</span></span>; </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) pre[i] = pre[i - <span class="number">1</span>] + sum[i - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> l = <span class="number">0</span>, r = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">while</span> (l + <span class="number">1e-7</span> &lt; r) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">double</span> preMin = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">bool</span> ok = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = m; i &lt;= n; i++) &#123; <span class="comment">// æšä¸¾å³ç«¯ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (pre[i] - mid * i - preMin &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                ok = <span class="number">1</span>;</span><br><span class="line">                l = mid;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            preMin = min(preMin, pre[i - m + <span class="number">1</span>] - mid * (i - m + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!ok) r = mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, x, y;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    vector&lt;int&gt; a(n), b(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) <span class="built_in">cin</span> &gt;&gt; b[i];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.8lf\n"</span>, findMax(a, n, x) + findMax(b, m, y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhang185a.gitee.io/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/header.jpeg">
      <meta itemprop="name" content="zhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang185's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A13/" class="post-title-link" itemprop="url">2021ç‰›å®¢å¤šæ ¡3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-28 14:05:23" itemprop="dateCreated datePublished" datetime="2021-07-28T14:05:23+08:00">2021-07-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-07-30 04:29:12" itemprop="dateModified" datetime="2021-07-30T04:29:12+08:00">2021-07-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Black-and-white"><a href="#Black-and-white" class="headerlink" title="Black and white"></a><a href="https://ac.nowcoder.com/acm/contest/11254/B" target="_blank" rel="noopener">Black and white</a></h1><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>$n*m$çš„çŸ©å½¢ åˆå§‹æ—¶æ¯ä¸ªç‚¹éƒ½ä¸ºç™½è‰²ï¼Œå¯ä»¥ä»¥$C_{i, j}$çš„ä»£ä»·å°†ç‚¹$(i, j)$æŸ“é»‘ï¼Œå¹¶ä¸”å¦‚æœä»»å–ä¸¤è¡Œä¸¤åˆ—äº¤å‰çš„å››ä¸ªæ ¼å­ä¸­æœ‰ä¸‰ä¸ªæ˜¯é»‘è‰²ï¼Œåˆ™ç¬¬å››ä¸ªæ ¼å­å¯ä»¥å…è´¹æŸ“é»‘ã€‚é—®å°†æ‰€æœ‰æ ¼å­æŸ“é»‘çš„æœ€å°ä»£ä»·ã€‚</p>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>æœ€å°ç”Ÿæˆæ ‘</strong>ï¼Œå®åœ¨æ˜¯å¤ªå¦™äº†â€¦</p>
<p>å°†å›¾çš„æ¯ä¸€è¡Œå’Œæ¯ä¸€åˆ—æŠ½è±¡æˆäºŒéƒ¨å›¾çš„ç‚¹ï¼Œæ¯ä¸ªæ ¼å­çš„ä»£ä»·å¯ä»¥çœ‹ä½œæ˜¯è¿™ä¸ªäºŒéƒ¨å›¾ä¸¤ä¸ªç‚¹è¿çº¿å½¢æˆçš„ä»£ä»·.å¦‚æœå¯ä»¥å…è´¹åœ°è¿æ¥ä¸¤ä¸ªç‚¹ï¼Œæ­¤æ—¶æ•´ä¸ªå›¾å½¢çš„è¿é€šæ€§ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚å› æ­¤æœ€åå…¨éƒ¨è¿é€šå³ç­‰äºåˆå§‹è¿é€šæ—¶çš„ç­”æ¡ˆã€‚ä½¿ç”¨æœ€å°ç”Ÿæˆæ ‘æ±‚è§£ã€‚</p>
<p>ç­”æ¡ˆè¯´ç”¨primeç®—æ³•ï¼Œä½†æ˜¯æˆ‘çœ‹å¥½å¤šäººéƒ½ç”¨çš„æ˜¯Kruskalã€‚ </p>
<p>==REDO==</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">5010</span>;</span><br><span class="line"></span><br><span class="line">ll n, m, b, c, d, p;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> A[N * N];</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">2</span> * N][<span class="number">2</span> * N];</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">2</span> * N];</span><br><span class="line"><span class="keyword">int</span> curMin[<span class="number">2</span> * N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(curMin, <span class="number">0x33</span>, <span class="keyword">sizeof</span>(curMin));</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; A[<span class="number">0</span>] &gt;&gt; b &gt;&gt; c &gt;&gt; d &gt;&gt; p;</span><br><span class="line"><span class="comment">//    see(curMin[1]);</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">            ll pre = A[m * (i - <span class="number">1</span>) + j - <span class="number">1</span>];</span><br><span class="line">            A[m * (i - <span class="number">1</span>) + j] = ((pre * pre % p * b % p + pre * c % p) % p + d) % p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">            a[i][j + N] = A[m * (i - <span class="number">1</span>) + j];</span><br><span class="line">            a[j + N][i] = A[m * (i - <span class="number">1</span>) + j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    priority_queue&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;, <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt;, greater&lt;&gt; &gt; pq; <span class="comment">// æƒ ç‚¹</span></span><br><span class="line">    pq.push(&#123;<span class="number">0</span>, <span class="number">1</span>&#125;);</span><br><span class="line">    <span class="keyword">while</span> (!pq.empty()) &#123;</span><br><span class="line">        <span class="keyword">auto</span> cur = pq.top();</span><br><span class="line">        pq.pop();</span><br><span class="line">        <span class="keyword">if</span> (vis[cur.second]) <span class="keyword">continue</span>;</span><br><span class="line">        vis[cur.second] = <span class="number">1</span>;</span><br><span class="line">        ans += cur.first;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cur.second &lt;= N) &#123; <span class="comment">// å½“å‰æ˜¯i</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!vis[i + N] &amp;&amp; a[cur.second][i + N] &lt; curMin[i + N]) &#123;</span><br><span class="line">                    pq.push(&#123;a[cur.second][i + N], i + N&#125;);</span><br><span class="line">                    curMin[i + N] = a[cur.second][i + N];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!vis[i] &amp;&amp; a[cur.second][i] &lt; curMin[i]) &#123;</span><br><span class="line">                    pq.push(&#123;a[cur.second][i], i&#125;);</span><br><span class="line">                    curMin[i] = a[cur.second][i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Minimum-grid"><a href="#Minimum-grid" class="headerlink" title="Minimum grid"></a><a href="https://ac.nowcoder.com/acm/contest/11254/C" target="_blank" rel="noopener">Minimum grid</a></h1><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å®šä¸€ä¸ª $n*m$ çš„çŸ©å½¢ä»¥æ¯è¡Œã€æ¯åˆ—çš„æœ€å¤§å€¼ï¼Œä½†æ˜¯æœ‰çš„åœ°æ–¹æ— æ³•å¡«å€¼ï¼Œæ±‚å¦‚ä½•å¡«å€¼å¯ä»¥ä½¿å¾—çŸ©å½¢å„ç‚¹ä¹‹å’Œæœ€å°</p>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>è½¬æˆäºŒéƒ¨å›¾çš„<strong>æœ€å¤§åŒ¹é…é—®é¢˜</strong></p>
<p>æšä¸¾å„è¾¹èƒ½å–åˆ°çš„æœ€å¤§å€¼xï¼Œå¦‚æœæœ‰ä¸€ä¸ªç‚¹çš„è¡Œæœ€å¤§å’Œåˆ—æœ€å¤§éƒ½æ˜¯xï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œå¡«å…¥xåå¯ä»¥åŒæ—¶æ»¡è¶³è¿™è¡Œå’Œè¿™åˆ—ï¼Œå‡è®¾æœ‰nè¡Œmåˆ—çš„æœ€å¤§å€¼è¦æ±‚ä¸ºxï¼Œå¹¶ä¸”æˆ‘ä»¬èƒ½åœ¨kä¸ªäº¤å‰ç‚¹å¡«å…¥xï¼Œé‚£ä¹ˆå¯¹äºxè€Œå·²ï¼ŒèŠ±è´¹å°±æ˜¯ $(n+m-k)x$â€‹ ä¹‹åæšä¸¾æ¯ä¸€ä¸ªå¯èƒ½å–åˆ°çš„æœ€å¤§å€¼å³å¯ã€‚</p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"><span class="comment">//#define int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    T = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> N = <span class="number">2e3</span> + <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, k, a[N], b[N], c[<span class="number">2</span> * N], con[N][N];</span><br><span class="line"><span class="keyword">int</span> cy[N];</span><br><span class="line"><span class="keyword">bool</span> cx[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">line</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> x)</span> </span>&#123; <span class="comment">//å°è¯•ç»™x[u] è¿çº¿</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">1</span>; v &lt;= n; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (con[u][v] == x &amp;&amp; !vis[v] &amp;&amp; b[v] == x) &#123;</span><br><span class="line">            vis[v] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (!cy[v] || line(cy[v], x)) &#123;<span class="comment">//å¦‚æœyé›†åˆä¸­çš„væ²¡æœ‰åŒ¹é…æˆ–vå·²ç»åŒ¹é…ï¼Œä½†ä»cy[v]ä¸­å¯ä»¥æ‰¾åˆ°ä¸€æ¡å¢å¹¿è·¯</span></span><br><span class="line">                cx[u] = <span class="number">1</span>;</span><br><span class="line">                cy[v] = u;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxmatch</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="comment">// vis&gt;=xæ‰è§†ä½œæœ‰è¾¹ç›¸è¿</span></span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] != x) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) vis[j] = <span class="number">0</span>;</span><br><span class="line">        sum += line(i, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">        c[i] = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; b[i];</span><br><span class="line">        c[i + n] = b[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="keyword">int</span> i, j;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; i &gt;&gt; j;</span><br><span class="line">        con[i][j] = min(a[i], b[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(c + <span class="number">1</span>, c + <span class="number">2</span> * n + <span class="number">1</span>, greater&lt;&gt;());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= <span class="number">2</span> * n + <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (c[i] != c[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cx[i] = cy[i] = <span class="number">0</span>;</span><br><span class="line">            ans += c[i - <span class="number">1</span>] * (cnt - maxmatch(c[i - <span class="number">1</span>]));</span><br><span class="line">            cnt = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Math"><a href="#Math" class="headerlink" title="Math"></a><a href="https://ac.nowcoder.com/acm/contest/11254/E" target="_blank" rel="noopener">Math</a></h1><h3 id="é¢˜ç›®-2"><a href="#é¢˜ç›®-2" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æœ‰ $1&lt;=x&lt;=y&lt;=n$,æ±‚æ»¡è¶³ $(x^2+y^2) mod (xy+1) = 0$ çš„ (x,y) çš„å¯¹æ•°ã€‚</p>
<h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>ä¸¤ä¸ªæ–¹æ³•ï¼Œæ³•ä¸€åº”è¯¥æ‰æ˜¯æ­£è§£ğŸ˜‡</p>
<ol>
<li>æ‰“è¡¨ï¼Œæ‰“è¡¨è§‚å¯Ÿåå¾—åˆ°ç­”æ¡ˆ</li>
<li><img src="https://tva1.sinaimg.cn/large/008i3skNly1gsyh31ytigj315d0u0gr8.jpg" alt="image-20210730042215951">)(æˆ‘çœ‹ä¸æ‡‚ï¼Œä½†æˆ‘å¤§å—éœ‡æƒŠ.jpg)</li>
</ol>
<h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"><span class="comment">//#define int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> __int128 ll;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;ll&gt; ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// x &lt;= y</span></span><br><span class="line">    ans.push_back(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (ll i = <span class="number">2</span>; i &lt; <span class="number">1e6</span> + <span class="number">10</span>; i++) &#123;</span><br><span class="line">        ll x = i, y = i * i * i, k = i * i;</span><br><span class="line">        <span class="keyword">while</span> (y &lt;= <span class="number">1e18</span>) &#123;</span><br><span class="line">            ans.push_back(y);</span><br><span class="line">            swap(x, y);</span><br><span class="line">            y = k * x - y;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(ans.begin(), ans.end());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> x;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; upper_bound(ans.begin(), ans.end(), x) - ans.begin() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="24dian"><a href="#24dian" class="headerlink" title="24dian"></a><a href="https://ac.nowcoder.com/acm/contest/11254/F" target="_blank" rel="noopener">24dian</a></h1><h3 id="é¢˜ç›®-3"><a href="#é¢˜ç›®-3" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>24ç‚¹æ¸¸æˆï¼šå¯ä»¥ä»1-13ä¸­é€‰æ‹©nå¼ ç‰Œï¼ˆæ¯å¼ ç‰Œå¯ä»¥é€‰å¤šæ¬¡ï¼‰ï¼Œé—®æœ‰å¤šå°‘ç§ç‰Œçš„ç»„åˆä½¿å¾—å¯ä»¥é€šè¿‡åŠ å‡ä¹˜é™¤å¾—åˆ°tå¹¶ä¸”è¿‡ç¨‹ä¸­ä¸€å®šä¼šå‡ºç°åˆ†æ•°</p>
<h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>æ¨¡æ‹Ÿã€DFSã€‚æ¨¡æ‹Ÿæ¨¡ç–¯äº†ğŸ˜‡ã€‚</p>
<p>å¾—åˆ°çš„ä¸€ä¸ªç»éªŒå°±æ˜¯è¿™ç§å¾ˆæŠ˜ç£¨äººçš„å¤§æ¨¡æ‹Ÿé¢˜å°±ç”¨vectorå½“å‚æ•°ä¼ å°±æ˜¯äº†ï¼Œä¸è¦ç»´æŠ¤ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåˆè¦æ”¹åˆè¦æ”¹å›å»ï¼Œéº»çƒ¦éº»çƒ¦</p>
<p>==REDO==</p>
<h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> see(...) cerr &lt;&lt; <span class="meta-string">"("</span> &lt;&lt; #__VA_ARGS__ &lt;&lt; <span class="meta-string">"):"</span>, _out(__VA_ARGS__)</span></span><br><span class="line"><span class="comment">//#define int ll</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _out() &#123; <span class="built_in">cerr</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> H, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">void</span> _out(H h, T... t) &#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; h;</span><br><span class="line">    _out(t...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZZY_DEBUG_LEVEL</span></span><br><span class="line">    freopen(<span class="string">"abc.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, t;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line"><span class="comment">//vector&lt;double&gt; res;</span></span><br><span class="line"><span class="comment">//map&lt;vector&lt;int&gt;, bool&gt; show; //å‡ºç°äº†ä¸æ˜¯åˆ†æ•°å—</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">judge</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; (<span class="keyword">int</span>) x + <span class="number">1e-9</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (y &gt; (<span class="keyword">int</span>) y + <span class="number">1e-9</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (x / y &gt; (<span class="keyword">int</span>) (x / y) + <span class="number">1e-9</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; res, <span class="keyword">bool</span> hasFenShu)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 0 -&gt; å¤±è´¥ 1-&gt;æˆåŠŸä¸”åˆ†æ•° 2-&gt; æˆåŠŸä½†å¯ä»¥æ²¡åˆ†æ•°</span></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; <span class="title">A</span><span class="params">(res)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> flg = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> sz = res.size();</span><br><span class="line">    <span class="keyword">if</span> (sz == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="comment">//        cout&lt;&lt;res[0]&lt;&lt;endl;</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">abs</span>(res[<span class="number">0</span>] - t) &lt; <span class="number">1e-6</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (hasFenShu) &#123;</span><br><span class="line"><span class="comment">//                show[a] = 1;</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sz; j++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; sz; k++) &#123;<span class="comment">//é€‰ä¸¤ä¸ªæ•°æ“ä½œ</span></span><br><span class="line">            <span class="keyword">if</span> (j == k) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; tmp;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sz; i++)</span><br><span class="line">                <span class="keyword">if</span> (i != j &amp;&amp; i != k) tmp.push_back(res[i]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            tmp.push_back(res[j] + res[k]);</span><br><span class="line">            flg = max(flg, dfs(tmp, hasFenShu));</span><br><span class="line">            tmp.pop_back();</span><br><span class="line"></span><br><span class="line">            tmp.push_back(res[j] - res[k]);</span><br><span class="line">            flg = max(flg, dfs(tmp, hasFenShu));</span><br><span class="line">            tmp.pop_back();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            tmp.push_back(res[j] * res[k]);</span><br><span class="line">            flg = max(flg, dfs(tmp, hasFenShu));</span><br><span class="line">            tmp.pop_back();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">abs</span>(res[k]) &gt; <span class="number">1e-6</span>) &#123;</span><br><span class="line">                tmp.push_back(res[j] / res[k]);</span><br><span class="line"><span class="comment">//                if (judge(res[j], res[k]))</span></span><br><span class="line"><span class="comment">//                    see(1);</span></span><br><span class="line">                flg = max(flg, dfs(tmp, hasFenShu || judge(res[j], res[k])));</span><br><span class="line">                tmp.pop_back();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; t;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    if (dfs(&#123;1, 3, 4, 6&#125;, 0) == 1) ans.push_back(a);</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; res;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">13</span>; i++) &#123;</span><br><span class="line">        res.push_back(i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt;= (n &gt;= <span class="number">2</span> ? <span class="number">13</span> : i); j++) &#123;</span><br><span class="line">            res.push_back(j);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = j; k &lt;= (n &gt;= <span class="number">3</span> ? <span class="number">13</span> : j); k++) &#123;</span><br><span class="line">                res.push_back(k);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> l = k; l &lt;= (n &gt;= <span class="number">4</span> ? <span class="number">13</span> : k); l++) &#123;</span><br><span class="line">                    res.push_back(l);</span><br><span class="line">                    a[<span class="number">0</span>] = i, a[<span class="number">1</span>] = j, a[<span class="number">2</span>] = k, a[<span class="number">3</span>] = l;</span><br><span class="line">                    <span class="keyword">while</span> (res.size() &gt; n) res.pop_back();</span><br><span class="line">                    <span class="keyword">if</span> (dfs(res, <span class="number">0</span>) == <span class="number">1</span>) ans.push_back(a);</span><br><span class="line">                    <span class="keyword">if</span>(res.size() == <span class="number">4</span>) res.pop_back();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(res.size() == <span class="number">3</span>) res.pop_back();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(res.size() == <span class="number">2</span>) res.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(res.size() == <span class="number">1</span>) res.pop_back();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x: ans) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; x[i] &lt;&lt; <span class="string">" \n"</span>[i == n - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/blog/">1</a><span class="page-number current">2</span><a class="page-number" href="/blog/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/7/">7</a><a class="extend next" rel="next" href="/blog/page/3/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zhang"
      src="/blog/images/header.jpeg">
  <p class="site-author-name" itemprop="name">zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">65</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">X</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  















  

  

</body>
</html>
